# JD Notes Things v1.1 Release Plan

This document contains the comprehensive implementation plan for v1.1. Check off tasks as completed.

---

## Table of Contents

1. [Overview](#overview)
2. [Research & Design Tasks](#research--design-tasks)
3. [Bug Fixes](#bug-fixes)
4. [Speaker Matching & Diarization](#speaker-matching--diarization)
5. [Contact System Improvements](#contact-system-improvements)
6. [Import System Enhancements](#import-system-enhancements)
7. [Vocabulary System](#vocabulary-system)
8. [Settings Export/Import](#settings-exportimport)
9. [UI Enhancements](#ui-enhancements)
10. [Review & Sync Management](#review--sync-management)

---

## Overview

### Features Included in v1.1

| Feature | Category |
|---------|----------|
| Google auth state bug fix | Bug Fix |
| Single instance enforcement | Bug Fix |
| Speaker matching for recorded transcripts | Core |
| Global speaker replacement for imports | Core |
| Transcript repair workflow | Core |
| Contact sync improvements | Core |
| Contact/Company CRM in Obsidian | Core |
| Import audio recordings | Core |
| Import review queue | Core |
| Custom vocabulary system | Core |
| Settings export/import | Utility |
| Meeting type icons (Zoom/Teams/In-Person) | UI |
| Preview routing in templates modal | UI |
| Contacts page + quick search | UI |
| "Not synced to Obsidian" view | UI |
| Stale link detection/refresh | Utility |

### Features Explicitly NOT in v1.1

- HubSpot integration
- Real-time transcription
- Elgato Stream Deck plugin
- Recording widget
- Gmail integration
- Obsidian Protocol Links

---

## Research & Design Tasks

These tasks should be completed first as they inform implementation decisions.

### RD-1: Recall.ai Speaker Diarization Best Practices

- [x] **RD-1.1** Review Recall.ai SDK documentation for speaker identification capabilities
- [x] **RD-1.2** Investigate how Zoom/Teams participant names are exposed via the SDK
- [x] **RD-1.3** Research Recall.ai recommended approach for matching speakers to participants
- [x] **RD-1.4** Document findings in `docs11/research/recall-speaker-diarization.md`
- [x] **RD-1.5** Determine if Recall.ai SDK can identify meeting type (Zoom/Teams/etc.)

**Context:** Currently, recorded transcripts show "Speaker A/B" instead of actual participant names, even though the meeting platform knows who is speaking. Need to understand how to access and use this data.

**Findings:** The SDK already provides participant names via `participant_events.join`. The gap is that `speech_on`/`speech_off` events are not subscribed, which would allow correlating Recall.ai participants with AssemblyAI speaker labels. The SDK also provides `participant.platform` for meeting type detection. See research doc for full details.

### RD-2: Transcription Provider Vocabulary Features

- [x] **RD-2.1** Research AssemblyAI custom vocabulary/word boost API
- [x] **RD-2.2** Research Deepgram keywords/custom vocabulary API
- [x] **RD-2.3** Compare approaches and determine best practice
- [x] **RD-2.4** Determine if vocabulary should be sent at transcription time vs. post-processing
- [x] **RD-2.5** Document findings in `docs11/research/vocabulary-best-practices.md`

**Context:** Users need to add client names, company names, and industry jargon to improve transcription accuracy. Both global and client-specific vocabulary lists are needed.

**Findings:** AssemblyAI uses `custom_spelling` (find/replace), Deepgram uses `keywords` with intensifiers (probability boosting). Both apply at transcription time. Recommend YAML-based vocabulary storage with provider-specific formatters. See research doc for implementation design.

### RD-3: Obsidian File Watching & Link Management

- [x] **RD-3.1** Research Obsidian plugin APIs for file move detection
- [x] **RD-3.2** Investigate file system watchers (chokidar, etc.) for vault monitoring
- [x] **RD-3.3** Evaluate using frontmatter meeting IDs to re-find moved files
- [x] **RD-3.4** Determine best approach: active watching vs. manual refresh scan
- [x] **RD-3.5** Document findings in `docs11/research/obsidian-link-management.md`

**Context:** When users manually move notes within Obsidian, the app's stored links become stale. Need a way to detect moves and update links.

**Findings:** Recommend **manual refresh scan** using frontmatter meeting IDs. Obsidian plugin events only work when running; chokidar has no rename event. Frontmatter IDs are reliable anchors - scan vault to find moved files by ID, update stored paths. Add "Refresh Obsidian Links" button to Settings. See research doc for implementation design.

### RD-4: Contact/Company CRM Structure Design

- [x] **RD-4.1** Research Obsidian Bases capabilities and limitations
- [x] **RD-4.2** Evaluate markdown files vs. Bases for contact/company storage
- [x] **RD-4.3** Design contact template (fields: name, emails, company, Google Contact link, meetings list)
- [x] **RD-4.4** Design company template (fields: name, domain, contacts, meetings list)
- [x] **RD-4.5** Determine how this could integrate with or replace routing.yaml
- [x] **RD-4.6** Design the linking syntax for transcripts (wiki-links, etc.)
- [x] **RD-4.7** Document architecture decision in `docs11/research/crm-structure-design.md`

**Context:** Want to create a CRM-like system in Obsidian with contact and company pages. These could potentially replace the routing.yaml system for determining where notes are saved.

**Findings:** Use markdown files in `/People` and `/Companies` folders with YAML frontmatter. Wiki-links (`[[Name]]`) for transcript speaker labels. Obsidian Bases can provide table views but not required. Coexist with routing.yaml for v1.1, consider replacement later. Auto-create pages on first contact mapping. See research doc for templates and workflow.

### RD-5: Speaker Matching Algorithm Design

- [x] **RD-5.1** Research industry best practices for speaker-to-participant matching
- [x] **RD-5.2** Review current SpeakerMatcher.js implementation
- [x] **RD-5.3** Design improved matching algorithm using:
  - Calendar invite participants
  - Speaking patterns/frequency
  - Names mentioned in transcript
  - Previous speaker ID mappings (for imports)
- [x] **RD-5.4** Document algorithm design in `docs11/research/speaker-matching-algorithm.md`

**Context:** Need to intelligently suggest which speaker (Speaker A, Speaker B, SPK-xxx) maps to which real person based on available signals.

**Findings:** Designed multi-signal algorithm combining: (1) SDK speech timeline correlation (highest confidence), (2) transcript content analysis (introductions, name mentions), (3) learned mappings from user confirmations, (4) heuristic fallbacks. Key improvement: subscribe to `speech_on`/`speech_off` SDK events to get near-100% accuracy for recorded meetings. See research doc for full algorithm design.

---

## Bug Fixes

### BF-1: Google Auth State on Install

**Problem:** After fresh install, app shows Google as "connected" but it's not actually authenticated. User must log out then log back in.

**Solution:** Ensure app starts in clean "not connected" state requiring fresh authentication on every install.

- [x] **BF-1.1** Locate where Google auth state is stored (token files, localStorage, etc.)
- [x] **BF-1.2** Identify the install/first-run detection logic
- [x] **BF-1.3** Add logic to clear Google auth state on install
- [x] **BF-1.4** Ensure OAuth token files are removed or invalidated
- [x] **BF-1.5** Test fresh install scenario - verify "not connected" state
- [x] **BF-1.6** Test that logging in works correctly after fresh install
- [x] **BF-1.7** Test that updating to new version also clears stale auth

**Files involved:**
- `src/main/integrations/GoogleAuth.js` - Added `validateTokens()`, `initializeAndValidate()`, `clearInvalidTokens()` methods
- `src/main.js` - Changed to use `initializeAndValidate()` on startup

**Fix:** Added token validation on startup. The new `initializeAndValidate()` method:
1. Loads existing token (if any)
2. Makes an API call to validate the token actually works
3. If invalid, clears the token file and resets credentials
4. Returns false so UI shows "not connected"

### BF-2: Single Instance Enforcement

**Problem:** When app is minimized (including to system tray) and user clicks app shortcut, multiple copies can open.

**Solution:** Enforce single instance. If app is already running:
- If visible: bring to front/focus
- If minimized to tray: restore and bring to front
- Do this silently (no notification)

- [x] **BF-2.1** Research Electron single instance lock (`app.requestSingleInstanceLock()`)
- [x] **BF-2.2** Implement single instance lock in main process
- [x] **BF-2.3** Handle `second-instance` event to focus existing window
- [x] **BF-2.4** Add logic to detect if window is minimized vs. visible
- [x] **BF-2.5** Add logic to restore from system tray if minimized there
- [ ] **BF-2.6** Test: Launch app, minimize to taskbar, click shortcut - should focus
- [ ] **BF-2.7** Test: Launch app, minimize to tray, click shortcut - should restore
- [ ] **BF-2.8** Test: Launch app, keep visible, click shortcut - should focus

**Files modified:**
- `src/main.js` - Added single instance lock after Squirrel startup check (lines 134-174)

**Fix:** Added `app.requestSingleInstanceLock()` early in app startup:
1. If lock not acquired, another instance is running - quit immediately
2. On `second-instance` event, detect window state:
   - Hidden (in tray): `mainWindow.show()` then focus
   - Minimized (taskbar): `mainWindow.restore()` then focus
   - Visible: just focus
3. Uses `isVisible()` and `isMinimized()` to detect state correctly
4. Uses `setAlwaysOnTop` trick to force Windows to bring window to front

**Note:** BF-2.6-2.8 cannot be tested in dev mode (electron-forge webpack blocks second instance). Must test with packaged production build. See [Pre-Release Testing](#pre-release-testing) section.

---

## Speaker Matching & Diarization

### SM-1: Fix Recorded Transcript Speaker Names

**Problem:** Recorded transcripts show "Speaker A/B" instead of actual Zoom/Teams participant names.

**Depends on:** RD-1 (Recall.ai research)

- [x] **SM-1.1** Review current recording pipeline in RecordingManager
- [x] **SM-1.2** Identify where Recall.ai SDK provides participant information
- [x] **SM-1.3** Modify recording flow to capture participant names from meeting platform
- [x] **SM-1.4** Store participant list with recording metadata
- [x] **SM-1.5** Update transcription service to receive participant list
- [x] **SM-1.6** Implement speaker-to-participant matching during transcription processing
- [x] **SM-1.7** Update transcript output to use real names instead of "Speaker A/B"
- [x] **SM-1.8** Test with Zoom meeting
- [ ] **SM-1.9** Test with Teams meeting

**Files modified:**
- `src/main.js`:
  - Added `speechTimelines` Map for tracking SDK speech events (line 212)
  - Subscribed to `participant_events.speech_on` and `participant_events.speech_off` events (lines 1522-1524)
  - Added speech event handlers in `realtime-event` listener (lines 2060-2065)
  - Added `initializeSpeechTimeline()`, `processSpeechOn()`, `processSpeechOff()`, `getSpeechTimeline()`, `cleanupSpeechTimeline()` functions (lines 5785-5944)
  - Initialize timeline when recording starts (line 4913)
  - Pass speech timeline to speaker matcher during export (lines 2215-2226)
  - Clean up timeline after speaker matching (lines 2242-2263)
- `src/main/integrations/SpeakerMatcher.js`:
  - Added `matchUsingTimeline()` method for high-confidence SDK timeline correlation
  - Added `findEmailForParticipant()` helper method
  - Modified `matchSpeakers()` to try timeline matching first, then fall back to heuristics
  - Modified `createSpeakerMapping()` to accept existing mapping and avoid duplicate assignments

**Implementation:**
1. SDK speech events (`speech_on`/`speech_off`) now captured during recording
2. Speech timeline correlates SDK participant names with timestamps
3. AssemblyAI utterance timestamps compared against speech timeline
4. Speakers assigned to participants with matching speech segments
5. Confidence levels: `high` (5+ matches), `medium` (2-4 matches), `low` (heuristic fallback)

### SM-2: Global Speaker Replacement for Imports

**Problem:** Imported transcripts have cryptic speaker IDs like `SPK-72zlg25bsiw`. User needs to replace these globally with contact links.

- [x] **SM-2.1** Design UI for speaker mapping during/after import
  - Show list of unique speaker IDs found in transcript
  - For each, allow selection of a contact (with search)
  - Preview what the replacement will look like
- [x] **SM-2.2** Create speaker ID → contact mapping data structure
- [x] **SM-2.3** Implement persistent storage for speaker ID mappings (for future auto-suggest)
- [x] **SM-2.4** Implement global find/replace function for transcripts
- [x] **SM-2.5** Update transcript to use contact links (format TBD based on RD-4)
- [x] **SM-2.6** On future imports, auto-suggest known speaker ID mappings
- [ ] **SM-2.7** Test import with multiple speaker IDs
- [ ] **SM-2.8** Test that mappings persist and auto-suggest works

**Files modified:**
- `src/main/services/speakerMappingService.js` - New service for persistent speaker ID → contact mappings
- `src/main.js` - Added IPC handlers for speaker mapping operations
- `src/preload.js` - Added preload API for speaker mapping
- `src/index.html` - Added speaker mapping modal
- `src/index.css` - Added speaker mapping modal styles
- `src/renderer/speakerMapping.js` - New UI module for speaker mapping modal
- `src/renderer/meetingDetail.js` - Added "Fix Speakers" button and integration
- `src/shared/validation.js` - Updated Zod schemas with `.passthrough()` and new speaker mapping fields

**Implementation:**
1. Created `speakerMappingService.js` with persistent JSON storage in app data directory
2. Speaker mappings store: speakerId → {contactName, contactEmail, obsidianLink, useCount, timestamps}
3. Modal shows all cryptic speaker IDs found in transcript with contact search
4. Auto-suggests known mappings from previous imports (sorted by useCount)
5. Apply button saves mappings to both meeting and persistent storage
6. "Fix Speakers" button appears in transcript tab when cryptic IDs detected
7. Updated Zod validation schemas to preserve new fields (speakerName, speakerEmail, speakerDisplayName, speakerMapped, mappedFromSpeakerId)
8. Fixed modal performance issue: replaced per-row document click listeners with single delegated handler

### SM-3: Transcript Repair Workflow

**Problem:** Existing transcripts (both old recordings and imports) have incorrect/generic speaker labels that need fixing.

**Depends on:** RD-5 (Speaker matching algorithm design)

- [ ] **SM-3.1** Design "Fix Transcript" UI
  - Select a transcript to improve
  - System analyzes and suggests speaker→contact mappings
  - Show confidence level for each suggestion
  - User can accept, correct, or reject suggestions
  - Preview changes before applying
- [ ] **SM-3.2** Implement transcript analysis to extract unique speakers
- [ ] **SM-3.3** Implement suggestion engine using:
  - Meeting participants from calendar
  - Previous speaker mappings
  - Names mentioned in transcript
  - Speaking patterns (if available)
- [ ] **SM-3.4** Implement bulk replacement function
- [ ] **SM-3.5** Update both transcript file and summary file
- [ ] **SM-3.6** Update Obsidian files if already synced
- [ ] **SM-3.7** Test on old recorded transcript with "Speaker A/B"
- [ ] **SM-3.8** Test on imported transcript with cryptic IDs

**Files likely involved:**
- New: `src/renderer/transcriptRepair.js`
- `src/main/integrations/SpeakerMatcher.js`
- `src/main/storage/VaultStructure.js`

---

## Contact System Improvements

### CS-1: Contacts Page

- [ ] **CS-1.1** Design contacts page layout
  - Search/filter bar
  - Contact list with key info (name, email, company)
  - Contact detail view
- [ ] **CS-1.2** Create new route/page for contacts
- [ ] **CS-1.3** Implement contact list component with search/filter
- [ ] **CS-1.4** Implement contact detail view showing:
  - Name
  - Email addresses
  - Company
  - Link to Google Contact
  - List of meetings they've attended
- [ ] **CS-1.5** Add navigation to contacts page from main menu
- [ ] **CS-1.6** Test search functionality
- [ ] **CS-1.7** Test contact detail view with meeting history

**Files likely involved:**
- New: `src/renderer/contacts.js`
- `src/main/integrations/GoogleContacts.js`
- Navigation/menu components

### CS-2: Quick Contact Search (Cmd+K Style)

- [ ] **CS-2.1** Design quick search popup UI
  - Keyboard shortcut to open (Ctrl+K or similar)
  - Search input with real-time results
  - Click or Enter to view contact
- [ ] **CS-2.2** Implement global keyboard shortcut listener
- [ ] **CS-2.3** Implement quick search popup component
- [ ] **CS-2.4** Implement fuzzy search over contacts
- [ ] **CS-2.5** Handle contact selection (navigate to detail or insert link)
- [ ] **CS-2.6** Test keyboard shortcut from various app states
- [ ] **CS-2.7** Test search performance with large contact list

**Files likely involved:**
- New: `src/renderer/components/QuickSearch.js`
- Main window keyboard event handling

### CS-3: Contact/Company Pages in Obsidian

**Depends on:** RD-4 (CRM structure design)

- [ ] **CS-3.1** Implement contact page template
- [ ] **CS-3.2** Implement company page template
- [ ] **CS-3.3** Create function to generate/update contact page in vault
- [ ] **CS-3.4** Create function to generate/update company page in vault
- [ ] **CS-3.5** Auto-create contact page when contact is first linked in transcript
- [ ] **CS-3.6** Auto-create company page when company is first referenced
- [ ] **CS-3.7** Update contact page when new meetings are added
- [ ] **CS-3.8** Update company page when new meetings are added
- [ ] **CS-3.9** Test contact page creation and updates
- [ ] **CS-3.10** Test company page creation and updates

**Files likely involved:**
- `src/main/storage/VaultStructure.js`
- New: `src/main/templates/contactTemplate.js`
- New: `src/main/templates/companyTemplate.js`

### CS-4: Preview Routing in Templates Modal

**Location:** The "Select Summary Templates" popup modal that appears before processing.

- [ ] **CS-4.1** Add "Preview Routing" button to templates modal
- [ ] **CS-4.2** Implement routing preview logic showing:
  - Destination path in Obsidian
  - Which rule matched (or "no rule matched")
  - Why this rule was selected
- [ ] **CS-4.3** If routing to "unfiled," show explanation of why no match
- [ ] **CS-4.4** Add ability to manually select destination from preview
- [ ] **CS-4.5** When manually selecting, offer to create/update routing rule
- [ ] **CS-4.6** Implement routing rule suggestion/creation
- [ ] **CS-4.7** Test with meeting that matches a rule
- [ ] **CS-4.8** Test with meeting that would go to unfiled
- [ ] **CS-4.9** Test manual override and rule creation

**Files likely involved:**
- Templates modal component in `src/renderer/`
- `src/main/routing/RoutingEngine.js`
- `src/main/routing/ConfigLoader.js`

---

## Import System Enhancements

### IM-1: Audio File Import

**Current state:** App can import transcript files. Need to add audio file import.

- [ ] **IM-1.1** Update import UI to accept audio files (.mp3, .wav, .m4a, etc.)
- [ ] **IM-1.2** Add audio file type detection
- [ ] **IM-1.3** When audio detected, show transcription provider selector
  - Default to currently selected provider
  - Allow user to change
- [ ] **IM-1.4** Implement audio upload to transcription provider
- [ ] **IM-1.5** Handle transcription result (same flow as recorded meetings)
- [ ] **IM-1.6** Support batch audio import
- [ ] **IM-1.7** Test import of single audio file
- [ ] **IM-1.8** Test batch import of multiple audio files
- [ ] **IM-1.9** Test provider switching at import time

**Files likely involved:**
- Import wizard in `src/renderer/`
- `src/main/services/transcriptionService.js`
- File type detection utilities

### IM-2: Import Metadata Auto-Population

- [ ] **IM-2.1** Define metadata fields for imported meetings:
  - Meeting title
  - Date/time
  - Participants
  - Meeting type
  - Duration (if determinable)
- [ ] **IM-2.2** Implement filename pattern parsing for metadata extraction
  - Common patterns: `2024-01-15 Client Meeting.mp3`, `Meeting with John - Sales Call.txt`
- [ ] **IM-2.3** Extract date from file modification time as fallback
- [ ] **IM-2.4** Scan transcript content for mentioned names (potential participants)
- [ ] **IM-2.5** Create meeting record with "needs verification" status
- [ ] **IM-2.6** Display auto-populated metadata in review queue
- [ ] **IM-2.7** Test various filename patterns
- [ ] **IM-2.8** Test fallback to file dates

**Files likely involved:**
- New: `src/main/services/importMetadataService.js`
- Import wizard components
- Meeting data model

### IM-3: Import Review Queue

- [ ] **IM-3.1** Add "needs verification" status to meeting data model
- [ ] **IM-3.2** Create "Pending Imports" page/tab in Review section
- [ ] **IM-3.3** Display list of imported meetings awaiting verification
- [ ] **IM-3.4** For each meeting show:
  - Auto-populated metadata
  - Confidence indicators (what was guessed vs. extracted)
  - Approve button
  - Edit button
- [ ] **IM-3.5** Implement Edit functionality (modify any metadata field)
- [ ] **IM-3.6** Implement single Approve functionality (mark as verified)
- [ ] **IM-3.7** Implement multi-select with bulk Approve
- [ ] **IM-3.8** On approval: just save metadata, do NOT auto-process
- [ ] **IM-3.9** Test single approval flow
- [ ] **IM-3.10** Test bulk approval flow

**Files likely involved:**
- New: `src/renderer/reviewQueue.js`
- Meeting data model/storage
- Navigation components

---

## Vocabulary System

### VC-1: Vocabulary Storage & Management

**Depends on:** RD-2 (Vocabulary best practices research)

- [ ] **VC-1.1** Design vocabulary data structure:
  - Global vocabulary list
  - Per-client vocabulary lists
  - Each entry: term, optional pronunciation hint, optional category
- [ ] **VC-1.2** Determine storage location (app config directory for export/import)
- [ ] **VC-1.3** Create vocabulary file format (YAML or JSON)
- [ ] **VC-1.4** Implement vocabulary file read/write
- [ ] **VC-1.5** Implement vocabulary merge function (global + client-specific)
- [ ] **VC-1.6** Add vocabulary to settings export/import scope

**Files likely involved:**
- New: `src/main/services/vocabularyService.js`
- Config directory structure

### VC-2: Vocabulary UI

- [ ] **VC-2.1** Design vocabulary management UI
  - Tab for global vocabulary
  - Tab for client-specific (select client)
  - Add/edit/delete terms
  - Import from file
  - Export to file
- [ ] **VC-2.2** Add vocabulary section to settings panel
- [ ] **VC-2.3** Implement global vocabulary editor
- [ ] **VC-2.4** Implement client selector for client-specific vocabulary
- [ ] **VC-2.5** Implement term add/edit/delete
- [ ] **VC-2.6** Implement vocabulary file import
- [ ] **VC-2.7** Implement vocabulary file export
- [ ] **VC-2.8** Test CRUD operations
- [ ] **VC-2.9** Test import/export

**Files likely involved:**
- `src/renderer/settings.js`
- New vocabulary management components

### VC-3: Vocabulary Integration with Transcription

- [ ] **VC-3.1** Update transcription service to accept vocabulary list
- [ ] **VC-3.2** Implement vocabulary formatting for AssemblyAI API
- [ ] **VC-3.3** Implement vocabulary formatting for Deepgram API
- [ ] **VC-3.4** Implement vocabulary formatting for Recall.ai (if supported)
- [ ] **VC-3.5** Determine which client vocabulary to use based on meeting participants
- [ ] **VC-3.6** Merge global + client vocabulary before sending to provider
- [ ] **VC-3.7** Test transcription with custom vocabulary (AssemblyAI)
- [ ] **VC-3.8** Test transcription with custom vocabulary (Deepgram)

**Files likely involved:**
- `src/main/services/transcriptionService.js`
- New: vocabulary service

---

## Settings Export/Import

### SE-1: Settings Export

- [ ] **SE-1.1** Define export package contents:
  - Routing rules (routing.yaml)
  - Templates
  - Vocabulary lists (global and client-specific)
  - Speaker ID mappings
  - App preferences
  - API key references (not actual keys)
- [ ] **SE-1.2** Implement export function that gathers all config files
- [ ] **SE-1.3** Package into single archive (ZIP or similar)
- [ ] **SE-1.4** Add "Export Settings" button to settings UI
- [ ] **SE-1.5** Show file picker for export location
- [ ] **SE-1.6** Generate export with timestamp in filename
- [ ] **SE-1.7** Test export creates valid archive
- [ ] **SE-1.8** Test all expected files are included

**Files likely involved:**
- `src/renderer/settings.js`
- New: `src/main/services/settingsExportService.js`

### SE-2: Settings Import

- [ ] **SE-2.1** Add "Import Settings" button to settings UI
- [ ] **SE-2.2** Show file picker for import archive
- [ ] **SE-2.3** Validate archive structure before import
- [ ] **SE-2.4** Show preview of what will be imported
- [ ] **SE-2.5** Implement conflict resolution (overwrite vs. merge)
- [ ] **SE-2.6** Extract and copy files to appropriate locations
- [ ] **SE-2.7** Reload app configuration after import
- [ ] **SE-2.8** Show success/failure summary
- [ ] **SE-2.9** Test import of full settings package
- [ ] **SE-2.10** Test partial import (some files missing)

**Files likely involved:**
- `src/renderer/settings.js`
- New: `src/main/services/settingsImportService.js`

---

## UI Enhancements

### UI-1: Meeting Type Icons

**Depends on:** RD-1 (determine if Recall.ai SDK provides meeting type)

- [ ] **UI-1.1** Research/confirm how to detect meeting type:
  - From Recall.ai SDK during recording
  - From meeting URL patterns (zoom.us, teams.microsoft.com)
  - Manual selection for imports
- [ ] **UI-1.2** Add meeting type field to meeting data model
- [ ] **UI-1.3** Create/source icons for:
  - Zoom
  - Microsoft Teams
  - Google Meet
  - In-Person
  - Unknown/Other
- [ ] **UI-1.4** Update meeting list UI to display icon
- [ ] **UI-1.5** Update meeting detail view to display icon
- [ ] **UI-1.6** For imports, allow user to select meeting type
- [ ] **UI-1.7** Test icon display for each meeting type

**Files likely involved:**
- Meeting list components
- Meeting data model
- Asset files for icons

---

## Review & Sync Management

### RS-1: "Not Synced to Obsidian" View

- [ ] **RS-1.1** Add sync status field to meeting data model
- [ ] **RS-1.2** Track when meeting is synced to Obsidian
- [ ] **RS-1.3** Create "Not Synced" page/tab in Review section
- [ ] **RS-1.4** Display list of meetings not yet exported to Obsidian
- [ ] **RS-1.5** Show key info: title, date, participants
- [ ] **RS-1.6** Add "Sync to Obsidian" button for individual meetings
- [ ] **RS-1.7** Add bulk sync functionality
- [ ] **RS-1.8** Test view populates correctly
- [ ] **RS-1.9** Test sync from this view

**Files likely involved:**
- New: `src/renderer/reviewSync.js`
- Meeting data model
- `src/main/storage/VaultStructure.js`

### RS-2: Stale Link Detection & Refresh

**Depends on:** RD-3 (Obsidian link management research)

- [ ] **RS-2.1** Add Obsidian path field to meeting data model (if not present)
- [ ] **RS-2.2** Add unique meeting ID to note frontmatter (if not present)
- [ ] **RS-2.3** Implement vault scan function to find notes by meeting ID
- [ ] **RS-2.4** Implement link validation (check if stored path still exists)
- [ ] **RS-2.5** Create "Refresh Links" function
  - Scan vault for all meeting notes
  - Match to app records by meeting ID
  - Update stored paths
- [ ] **RS-2.6** Add "Refresh Links" button to settings or review section
- [ ] **RS-2.7** Show results: updated, not found, unchanged
- [ ] **RS-2.8** For "not found" notes, offer file picker to manually locate
- [ ] **RS-2.9** Test with moved files
- [ ] **RS-2.10** Test with deleted files
- [ ] **RS-2.11** Test manual relocation

**Files likely involved:**
- `src/main/storage/VaultStructure.js`
- Meeting data model
- Settings or review UI

### RS-3: Review Section Organization

- [ ] **RS-3.1** Design Review section layout with tabs:
  - Pending Imports (from IM-3)
  - Not Synced (from RS-1)
- [ ] **RS-3.2** Create Review section container component
- [ ] **RS-3.3** Implement tab navigation
- [ ] **RS-3.4** Add Review section to main navigation
- [ ] **RS-3.5** Add badge/counter showing total items needing attention
- [ ] **RS-3.6** Test navigation between tabs
- [ ] **RS-3.7** Test counter updates correctly

**Files likely involved:**
- New: `src/renderer/review.js`
- Navigation components

---

## Implementation Notes

### Dependencies Between Tasks

```
RD-1 (Recall.ai research) → SM-1 (Fix recorded speakers), UI-1 (Meeting icons)
RD-2 (Vocabulary research) → VC-1, VC-2, VC-3 (All vocabulary tasks)
RD-3 (Obsidian links research) → RS-2 (Stale link detection)
RD-4 (CRM structure design) → CS-3 (Contact/Company pages), SM-2 (Speaker replacement format)
RD-5 (Speaker matching algorithm) → SM-3 (Transcript repair)
```

### Suggested Implementation Order

1. **Phase 1: Research & Design**
   - Complete all RD-* tasks
   - Document findings for reference during implementation

2. **Phase 2: Bug Fixes**
   - BF-1 (Google auth)
   - BF-2 (Single instance)

3. **Phase 3: Core Infrastructure**
   - VC-1 (Vocabulary storage)
   - SE-1, SE-2 (Settings export/import)
   - IM-2 (Import metadata)

4. **Phase 4: Contact System**
   - CS-1 (Contacts page)
   - CS-2 (Quick search)
   - CS-3 (Obsidian contact/company pages)
   - CS-4 (Preview routing)

5. **Phase 5: Speaker Matching**
   - SM-1 (Fix recorded transcripts)
   - SM-2 (Global speaker replacement)
   - SM-3 (Transcript repair workflow)

6. **Phase 6: Import System**
   - IM-1 (Audio import)
   - IM-3 (Review queue)

7. **Phase 7: UI & Polish**
   - UI-1 (Meeting type icons)
   - VC-2 (Vocabulary UI)
   - RS-1, RS-2, RS-3 (Review & sync management)

### File Locations Reference

| Component | Location |
|-----------|----------|
| Main process entry | `src/main/main.js` |
| Recording | `src/main/recording/RecordingManager.js` |
| Transcription | `src/main/services/transcriptionService.js` |
| Google Auth | `src/main/integrations/GoogleAuth.js` |
| Google Contacts | `src/main/integrations/GoogleContacts.js` |
| Speaker Matcher | `src/main/integrations/SpeakerMatcher.js` |
| Routing | `src/main/routing/RoutingEngine.js` |
| Vault Structure | `src/main/storage/VaultStructure.js` |
| Settings UI | `src/renderer/settings.js` |
| Templates UI | `src/renderer/templates.js` |

### Testing Checklist Template

For each feature, ensure:
- [ ] Unit tests written (where applicable)
- [ ] Manual testing completed
- [ ] Edge cases tested
- [ ] Error handling verified
- [ ] UI/UX reviewed

---

## Pre-Release Testing

Some features cannot be fully tested in development mode and require a packaged production build. Complete these tests before releasing v1.1.

### Build & Package

```bash
npm run make
```

Install the resulting package to test production behavior.

### PR-1: Production-Only Tests

These tests require the packaged app because they depend on behaviors that differ between dev and production:

- [ ] **PR-1.1** BF-1: Fresh install shows Google as "not connected"
  - Uninstall any existing version
  - Install fresh from new package
  - Verify Google button shows disconnected state
  - Connect to Google, verify it works

- [ ] **PR-1.2** BF-2: Single instance - window visible
  - Launch app (window visible)
  - Try to launch app again (shortcut, Start menu, or .exe)
  - Second launch should quit and first window should focus

- [ ] **PR-1.3** BF-2: Single instance - minimized to taskbar
  - Launch app
  - Minimize to taskbar
  - Try to launch app again
  - Window should restore from taskbar and focus

- [ ] **PR-1.4** BF-2: Single instance - minimized to tray
  - Launch app
  - Minimize to system tray (close button or minimize if tray enabled)
  - Try to launch app again
  - Window should appear from tray and focus

- [ ] **PR-1.5** SM-1: Speaker matching with real Zoom meeting
  - Join a Zoom meeting with 2+ participants
  - Record the meeting
  - After transcription, verify speakers are matched to participant names

- [ ] **PR-1.6** SM-1: Speaker matching with real Teams meeting
  - Join a Teams meeting with 2+ participants
  - Record the meeting
  - After transcription, verify speakers are matched to participant names

### PR-2: Upgrade Path Testing

- [ ] **PR-2.1** Upgrade from v1.0 to v1.1
  - Install v1.0 (if not already installed)
  - Use the app, create some meetings
  - Install v1.1 over v1.0
  - Verify existing data is preserved
  - Verify new features work

- [ ] **PR-2.2** Google re-authentication after upgrade
  - With v1.0, connect Google
  - Upgrade to v1.1
  - If BF-1 triggers token validation, verify user can re-connect smoothly

### PR-3: Release Checklist

- [ ] **PR-3.1** All dev-mode tests passing
- [ ] **PR-3.2** All production-only tests (PR-1) passing
- [ ] **PR-3.3** Upgrade path tests (PR-2) passing
- [ ] **PR-3.4** Update version number in package.json
- [ ] **PR-3.5** Update CHANGELOG.md
- [ ] **PR-3.6** Create git tag for release
- [ ] **PR-3.7** Build final release package
