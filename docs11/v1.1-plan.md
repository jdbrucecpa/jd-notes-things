# JD Notes Things v1.1 Release Plan

This document contains the comprehensive implementation plan for v1.1. Check off tasks as completed.

---

## Table of Contents

1. [Overview](#overview)
2. [Research & Design Tasks](#research--design-tasks)
3. [Bug Fixes](#bug-fixes)
4. [Speaker Matching & Diarization](#speaker-matching--diarization)
5. [Contact System Improvements](#contact-system-improvements)
6. [Import System Enhancements](#import-system-enhancements)
7. [Vocabulary System](#vocabulary-system)
8. [Settings Export/Import](#settings-exportimport)
9. [UI Enhancements](#ui-enhancements)
10. [Review & Sync Management](#review--sync-management)

---

## Overview

### Features Included in v1.1

| Feature | Category | Status |
|---------|----------|--------|
| Google auth state bug fix | Bug Fix | ✅ Done |
| Single instance enforcement | Bug Fix | ✅ Done |
| Speaker matching for recorded transcripts | Core | ✅ Done |
| Global speaker replacement for imports | Core | ✅ Done |
| Speaker mapping enhancements (merge, dedup) | Core | ✅ Done |
| User profile & auto-labeling | Core | ✅ Done |
| Transcript repair workflow | Core | Partial |
| Contact sync improvements | Core | |
| Contact/Company CRM in Obsidian | Core | ✅ Done |
| Import audio recordings | Core | ✅ Done |
| Import review queue | Core | ❌ Descoped |
| Custom vocabulary system | Core | ✅ Done |
| Settings export/import | Utility | ✅ Done |
| Meeting type icons (Zoom/Teams/In-Person) | UI | ✅ Done |
| Preview routing in templates modal | UI | ✅ Done |
| Contacts page + quick search | UI | ✅ Done |
| "Not synced to Obsidian" view | UI | |
| Stale link detection/refresh | Utility | |

### Features Explicitly NOT in v1.1

- HubSpot integration
- Real-time transcription
- Elgato Stream Deck plugin
- Recording widget
- Gmail integration
- Obsidian Protocol Links

---

## Research & Design Tasks

These tasks should be completed first as they inform implementation decisions.

### RD-1: Recall.ai Speaker Diarization Best Practices

- [x] **RD-1.1** Review Recall.ai SDK documentation for speaker identification capabilities
- [x] **RD-1.2** Investigate how Zoom/Teams participant names are exposed via the SDK
- [x] **RD-1.3** Research Recall.ai recommended approach for matching speakers to participants
- [x] **RD-1.4** Document findings in `docs11/research/recall-speaker-diarization.md`
- [x] **RD-1.5** Determine if Recall.ai SDK can identify meeting type (Zoom/Teams/etc.)

**Context:** Currently, recorded transcripts show "Speaker A/B" instead of actual participant names, even though the meeting platform knows who is speaking. Need to understand how to access and use this data.

**Findings:** The SDK already provides participant names via `participant_events.join`. The gap is that `speech_on`/`speech_off` events are not subscribed, which would allow correlating Recall.ai participants with AssemblyAI speaker labels. The SDK also provides `participant.platform` for meeting type detection. See research doc for full details.

### RD-2: Transcription Provider Vocabulary Features

- [x] **RD-2.1** Research AssemblyAI custom vocabulary/word boost API
- [x] **RD-2.2** Research Deepgram keywords/custom vocabulary API
- [x] **RD-2.3** Compare approaches and determine best practice
- [x] **RD-2.4** Determine if vocabulary should be sent at transcription time vs. post-processing
- [x] **RD-2.5** Document findings in `docs11/research/vocabulary-best-practices.md`

**Context:** Users need to add client names, company names, and industry jargon to improve transcription accuracy. Both global and client-specific vocabulary lists are needed.

**Findings:** AssemblyAI uses `custom_spelling` (find/replace), Deepgram uses `keywords` with intensifiers (probability boosting). Both apply at transcription time. Recommend YAML-based vocabulary storage with provider-specific formatters. See research doc for implementation design.

### RD-3: Obsidian File Watching & Link Management

- [x] **RD-3.1** Research Obsidian plugin APIs for file move detection
- [x] **RD-3.2** Investigate file system watchers (chokidar, etc.) for vault monitoring
- [x] **RD-3.3** Evaluate using frontmatter meeting IDs to re-find moved files
- [x] **RD-3.4** Determine best approach: active watching vs. manual refresh scan
- [x] **RD-3.5** Document findings in `docs11/research/obsidian-link-management.md`

**Context:** When users manually move notes within Obsidian, the app's stored links become stale. Need a way to detect moves and update links.

**Findings:** Recommend **manual refresh scan** using frontmatter meeting IDs. Obsidian plugin events only work when running; chokidar has no rename event. Frontmatter IDs are reliable anchors - scan vault to find moved files by ID, update stored paths. Add "Refresh Obsidian Links" button to Settings. See research doc for implementation design.

### RD-4: Contact/Company CRM Structure Design

- [x] **RD-4.1** Research Obsidian Bases capabilities and limitations
- [x] **RD-4.2** Evaluate markdown files vs. Bases for contact/company storage
- [x] **RD-4.3** Design contact template (fields: name, emails, company, Google Contact link, meetings list)
- [x] **RD-4.4** Design company template (fields: name, domain, contacts, meetings list)
- [x] **RD-4.5** Determine how this could integrate with or replace routing.yaml
- [x] **RD-4.6** Design the linking syntax for transcripts (wiki-links, etc.)
- [x] **RD-4.7** Document architecture decision in `docs11/research/crm-structure-design.md`

**Context:** Want to create a CRM-like system in Obsidian with contact and company pages. These could potentially replace the routing.yaml system for determining where notes are saved.

**Findings:** Use markdown files in `/People` and `/Companies` folders with YAML frontmatter. Wiki-links (`[[Name]]`) for transcript speaker labels. Obsidian Bases can provide table views but not required. Coexist with routing.yaml for v1.1, consider replacement later. Auto-create pages on first contact mapping. See research doc for templates and workflow.

### RD-5: Speaker Matching Algorithm Design

- [x] **RD-5.1** Research industry best practices for speaker-to-participant matching
- [x] **RD-5.2** Review current SpeakerMatcher.js implementation
- [x] **RD-5.3** Design improved matching algorithm using:
  - Calendar invite participants
  - Speaking patterns/frequency
  - Names mentioned in transcript
  - Previous speaker ID mappings (for imports)
- [x] **RD-5.4** Document algorithm design in `docs11/research/speaker-matching-algorithm.md`

**Context:** Need to intelligently suggest which speaker (Speaker A, Speaker B, SPK-xxx) maps to which real person based on available signals.

**Findings:** Designed multi-signal algorithm combining: (1) SDK speech timeline correlation (highest confidence), (2) transcript content analysis (introductions, name mentions), (3) learned mappings from user confirmations, (4) heuristic fallbacks. Key improvement: subscribe to `speech_on`/`speech_off` SDK events to get near-100% accuracy for recorded meetings. See research doc for full algorithm design.

---

## Bug Fixes

### BF-1: Google Auth State on Install

**Problem:** After fresh install, app shows Google as "connected" but it's not actually authenticated. User must log out then log back in.

**Solution:** Ensure app starts in clean "not connected" state requiring fresh authentication on every install.

- [x] **BF-1.1** Locate where Google auth state is stored (token files, localStorage, etc.)
- [x] **BF-1.2** Identify the install/first-run detection logic
- [x] **BF-1.3** Add logic to clear Google auth state on install
- [x] **BF-1.4** Ensure OAuth token files are removed or invalidated
- [x] **BF-1.5** Test fresh install scenario - verify "not connected" state
- [x] **BF-1.6** Test that logging in works correctly after fresh install
- [x] **BF-1.7** Test that updating to new version also clears stale auth

**Files involved:**
- `src/main/integrations/GoogleAuth.js` - Added `validateTokens()`, `initializeAndValidate()`, `clearInvalidTokens()` methods
- `src/main.js` - Changed to use `initializeAndValidate()` on startup

**Fix:** Added token validation on startup. The new `initializeAndValidate()` method:
1. Loads existing token (if any)
2. Makes an API call to validate the token actually works
3. If invalid, clears the token file and resets credentials
4. Returns false so UI shows "not connected"

### BF-2: Single Instance Enforcement

**Problem:** When app is minimized (including to system tray) and user clicks app shortcut, multiple copies can open.

**Solution:** Enforce single instance. If app is already running:
- If visible: bring to front/focus
- If minimized to tray: restore and bring to front
- Do this silently (no notification)

- [x] **BF-2.1** Research Electron single instance lock (`app.requestSingleInstanceLock()`)
- [x] **BF-2.2** Implement single instance lock in main process
- [x] **BF-2.3** Handle `second-instance` event to focus existing window
- [x] **BF-2.4** Add logic to detect if window is minimized vs. visible
- [x] **BF-2.5** Add logic to restore from system tray if minimized there
- [ ] **BF-2.6** Test: Launch app, minimize to taskbar, click shortcut - should focus
- [ ] **BF-2.7** Test: Launch app, minimize to tray, click shortcut - should restore
- [ ] **BF-2.8** Test: Launch app, keep visible, click shortcut - should focus

**Files modified:**
- `src/main.js` - Added single instance lock after Squirrel startup check (lines 134-174)

**Fix:** Added `app.requestSingleInstanceLock()` early in app startup:
1. If lock not acquired, another instance is running - quit immediately
2. On `second-instance` event, detect window state:
   - Hidden (in tray): `mainWindow.show()` then focus
   - Minimized (taskbar): `mainWindow.restore()` then focus
   - Visible: just focus
3. Uses `isVisible()` and `isMinimized()` to detect state correctly
4. Uses `setAlwaysOnTop` trick to force Windows to bring window to front

**Note:** BF-2.6-2.8 cannot be tested in dev mode (electron-forge webpack blocks second instance). Must test with packaged production build. See [Pre-Release Testing](#pre-release-testing) section.

---

## Speaker Matching & Diarization

### SM-1: Fix Recorded Transcript Speaker Names

**Problem:** Recorded transcripts show "Speaker A/B" instead of actual Zoom/Teams participant names.

**Depends on:** RD-1 (Recall.ai research)

- [x] **SM-1.1** Review current recording pipeline in RecordingManager
- [x] **SM-1.2** Identify where Recall.ai SDK provides participant information
- [x] **SM-1.3** Modify recording flow to capture participant names from meeting platform
- [x] **SM-1.4** Store participant list with recording metadata
- [x] **SM-1.5** Update transcription service to receive participant list
- [x] **SM-1.6** Implement speaker-to-participant matching during transcription processing
- [x] **SM-1.7** Update transcript output to use real names instead of "Speaker A/B"
- [x] **SM-1.8** Test with Zoom meeting
- [ ] **SM-1.9** Test with Teams meeting

**Files modified:**
- `src/main.js`:
  - Added `speechTimelines` Map for tracking SDK speech events (line 212)
  - Subscribed to `participant_events.speech_on` and `participant_events.speech_off` events (lines 1522-1524)
  - Added speech event handlers in `realtime-event` listener (lines 2060-2065)
  - Added `initializeSpeechTimeline()`, `processSpeechOn()`, `processSpeechOff()`, `getSpeechTimeline()`, `cleanupSpeechTimeline()` functions (lines 5785-5944)
  - Initialize timeline when recording starts (line 4913)
  - Pass speech timeline to speaker matcher during export (lines 2215-2226)
  - Clean up timeline after speaker matching (lines 2242-2263)
- `src/main/integrations/SpeakerMatcher.js`:
  - Added `matchUsingTimeline()` method for high-confidence SDK timeline correlation
  - Added `findEmailForParticipant()` helper method
  - Modified `matchSpeakers()` to try timeline matching first, then fall back to heuristics
  - Modified `createSpeakerMapping()` to accept existing mapping and avoid duplicate assignments

**Implementation:**
1. SDK speech events (`speech_on`/`speech_off`) now captured during recording
2. Speech timeline correlates SDK participant names with timestamps
3. AssemblyAI utterance timestamps compared against speech timeline
4. Speakers assigned to participants with matching speech segments
5. Confidence levels: `high` (5+ matches), `medium` (2-4 matches), `low` (heuristic fallback)

### SM-2: Global Speaker Replacement for Imports

**Problem:** Imported transcripts have cryptic speaker IDs like `SPK-72zlg25bsiw`. User needs to replace these globally with contact links.

- [x] **SM-2.1** Design UI for speaker mapping during/after import
  - Show list of unique speaker IDs found in transcript
  - For each, allow selection of a contact (with search)
  - Preview what the replacement will look like
- [x] **SM-2.2** Create speaker ID → contact mapping data structure
- [x] **SM-2.3** Implement persistent storage for speaker ID mappings (for future auto-suggest)
- [x] **SM-2.4** Implement global find/replace function for transcripts
- [x] **SM-2.5** Update transcript to use contact links (format TBD based on RD-4)
- [x] **SM-2.6** On future imports, auto-suggest known speaker ID mappings
- [x] **SM-2.7** Test import with multiple speaker IDs
- [x] **SM-2.8** Test that mappings persist and auto-suggest works

**Files modified:**
- `src/main/services/speakerMappingService.js` - New service for persistent speaker ID → contact mappings
- `src/main.js` - Added IPC handlers for speaker mapping operations
- `src/preload.js` - Added preload API for speaker mapping
- `src/index.html` - Added speaker mapping modal
- `src/index.css` - Added speaker mapping modal styles
- `src/renderer/speakerMapping.js` - New UI module for speaker mapping modal
- `src/renderer/meetingDetail.js` - Added "Fix Speakers" button and integration
- `src/shared/validation.js` - Updated Zod schemas with `.passthrough()` and new speaker mapping fields

**Implementation:**
1. Created `speakerMappingService.js` with persistent JSON storage in app data directory
2. Speaker mappings store: speakerId → {contactName, contactEmail, obsidianLink, useCount, timestamps}
3. Modal shows all cryptic speaker IDs found in transcript with contact search
4. Auto-suggests known mappings from previous imports (sorted by useCount)
5. Apply button saves mappings to both meeting and persistent storage
6. "Fix Speakers" button appears in transcript tab when cryptic IDs detected
7. Updated Zod validation schemas to preserve new fields (speakerName, speakerEmail, speakerDisplayName, speakerMapped, mappedFromSpeakerId)
8. Fixed modal performance issue: replaced per-row document click listeners with single delegated handler

### SM-2.5: Speaker Mapping Enhancements (v1.1 Session 2)

**Improvements made to speaker mapping modal and workflow:**

- [x] **SM-2.5.1** Show ALL speakers in Fix Speakers modal (not just cryptic IDs)
- [x] **SM-2.5.2** Filter out header content ("summary", "introduction", etc.) from speaker list
- [x] **SM-2.5.3** Implement duplicate speaker detection with auto-merge for obvious duplicates
- [x] **SM-2.5.4** Add suggestions for potential duplicate speakers (Levenshtein distance)
- [x] **SM-2.5.5** Add manual merge UI with multi-select checkboxes
- [x] **SM-2.5.6** Fix participant list deduplication when merging speakers
- [x] **SM-2.5.7** Fix contact auto-creation to only create pages for validated Google Contacts (with email)
- [x] **SM-2.5.8** Make transcript search bar sticky when scrolling

**Files modified:**
- `src/main/services/speakerMappingService.js` - Added `isHeaderContent()`, `detectDuplicateSpeakers()`, `levenshteinDistance()`, fixed `applyMappingsToTranscript()` to check both `speaker` and `speakerName`
- `src/renderer/speakerMapping.js` - Added merge mode, checkboxes, duplicate suggestions UI
- `src/main.js` - Updated `speakerMapping:applyToMeeting` handler with participant deduplication, fixed `autoCreateContactAndCompanyPages()` validation
- `src/index.html` - Added merge buttons to modal
- `src/index.css` - Added merge mode styles, sticky transcript toolbar

### SM-2.6: User Profile & Auto-Labeling (v1.1 Session 2)

**New feature:** User profile for personalized summaries and automatic single-speaker labeling.

- [x] **SM-2.6.1** Add "My Profile" tab to settings UI (name, email, title, organization, context)
- [x] **SM-2.6.2** Implement user profile storage (`config/user-profile.json`)
- [x] **SM-2.6.3** Add IPC handlers for `getUserProfile` and `saveUserProfile`
- [x] **SM-2.6.4** Auto-label single speakers as user's name in Fix Speakers modal (suggestion)
- [x] **SM-2.6.5** Auto-apply user profile mapping on import (before summary generation)
- [x] **SM-2.6.6** Auto-apply user profile mapping on live recording transcription
- [x] **SM-2.6.7** Replace participants list with user info when auto-labeling (not just add)
- [x] **SM-2.6.8** Update transcript formatting for LLM to use `speakerName` instead of `speaker`
- [x] **SM-2.6.9** Inject user profile context into auto-summary prompts
- [x] **SM-2.6.10** Inject user profile context into template-based summary prompts

**Files created/modified:**
- `src/index.html` - Added "My Profile" settings tab and form
- `src/index.css` - Added settings-textarea and section-description styles
- `src/renderer/settings.js` - Added profile tab handling, `loadUserProfile()`, `saveUserProfile()`
- `src/preload.js` - Added `getUserProfile`, `saveUserProfile` APIs
- `src/main.js` - Added user profile storage, IPC handlers, auto-labeling in import and transcription flows, LLM context injection
- `src/main/services/speakerMappingService.js` - Added `getAutoSuggestionsFromProfile()`, `autoApplyUserProfileMapping()`
- `src/main/import/ImportManager.js` - Added `autoLabelFunction` parameter, auto-label before summary generation
- `src/renderer/speakerMapping.js` - Added profile suggestion handling with distinct UI

**Implementation:**
- User profile stored in `userData/config/user-profile.json`
- Single-speaker transcripts automatically labeled as user (no modal needed)
- LLM prompts include: "The person reading this summary is [Name]. Their role is [Title]. They work at [Org]. [Custom context]"
- Transcript formatting now uses mapped speaker names for LLM input

### SM-3: Transcript Repair Workflow

**Problem:** Existing transcripts (both old recordings and imports) have incorrect/generic speaker labels that need fixing.

**Depends on:** RD-5 (Speaker matching algorithm design)

- [x] **SM-3.1** Design "Fix Transcript" UI
  - Select a transcript to improve
  - System analyzes and suggests speaker→contact mappings
  - Show confidence level for each suggestion
  - User can accept, correct, or reject suggestions
  - Preview changes before applying
- [x] **SM-3.2** Implement transcript analysis to extract unique speakers
- [x] **SM-3.3** Implement suggestion engine using:
  - Meeting participants from calendar
  - Previous speaker mappings
  - Names mentioned in transcript
  - Speaking patterns (if available)
- [x] **SM-3.4** Implement bulk replacement function
- [x] **SM-3.5** Update both transcript file and summary file
- [x] **SM-3.6** Update Obsidian files if already synced
- [ ] **SM-3.7** Test on old recorded transcript with "Speaker A/B"
- [ ] **SM-3.8** Test on imported transcript with cryptic IDs

**Note:** SM-3.1-3.4 were largely implemented as part of SM-2 (speaker mapping modal). SM-3.5/SM-3.6 added in the `speakerMapping:applyToMeeting` handler to regenerate Obsidian files when speaker mappings are applied.

**Files modified:**
- `src/main.js` - Added Obsidian file update logic in `speakerMapping:applyToMeeting` handler (lines 4433-4469)
- `src/renderer/speakerMapping.js` - Updated toast message to show Obsidian update status

---

## Contact System Improvements

### CS-1: Contacts Page

- [x] **CS-1.1** Design contacts page layout
  - Search/filter bar
  - Contact list with key info (name, email, company)
  - Contact detail view
- [x] **CS-1.2** Create new route/page for contacts
- [x] **CS-1.3** Implement contact list component with search/filter
- [x] **CS-1.4** Implement contact detail view showing:
  - Name
  - Email addresses
  - Company
  - Link to Google Contact
  - List of meetings they've attended
- [x] **CS-1.5** Add navigation to contacts page from main menu
- [x] **CS-1.6** Test search functionality
- [x] **CS-1.7** Test contact detail view with meeting history

**Files created/modified:**
- `src/renderer/contacts.js` - New contacts page module
- `src/main.js` - Added IPC handlers: `contacts:getAllContacts`, `contacts:getMeetingsForContact`
- `src/preload.js` - Added preload APIs for contacts
- `src/index.html` - Added contacts view layout and navigation button
- `src/index.css` - Added contacts page styles
- `src/renderer.js` - Import and initialize contacts module
- `src/renderer/settings.js` - Close contacts view when opening settings

**Implementation:**
- Full-page contacts view (similar pattern to settings)
- Left panel: searchable/filterable contact list with avatars
- Right panel: contact detail with emails, phones, organization, Google Contacts link
- Meeting history loaded from app data, clickable to open meeting detail
- Navigation: contacts button in header, mutual exclusion with settings view
- Fixed: Google contact link URL format (now uses correct Google Contacts URL structure)
- Fixed: meetings.json structure handling (combined upcomingMeetings + pastMeetings arrays)

### CS-2: Quick Contact Search (Cmd+K Style)

- [x] **CS-2.1** Design quick search popup UI
  - Keyboard shortcut to open (Ctrl+K or similar)
  - Search input with real-time results
  - Click or Enter to view contact
- [x] **CS-2.2** Implement global keyboard shortcut listener
- [x] **CS-2.3** Implement quick search popup component
- [x] **CS-2.4** Implement fuzzy search over contacts
- [x] **CS-2.5** Handle contact selection (navigate to detail or insert link)
- [x] **CS-2.6** Test keyboard shortcut from various app states
- [x] **CS-2.7** Test search performance with large contact list

**Files created/modified:**
- `src/renderer/quickSearch.js` - New quick search module
- `src/index.html` - Added quick search modal overlay
- `src/index.css` - Added quick search styles
- `src/renderer.js` - Import and initialize quick search

**Implementation:**
- Ctrl+K (Windows) / Cmd+K (Mac) opens quick search overlay
- Real-time fuzzy search over contact names, emails, and organizations
- Keyboard navigation with arrow keys, Enter to select, Escape to close
- Hover to select, click to navigate
- Match highlighting with `<mark>` tags
- Score-based ranking: name matches (100/50), email matches (80/40), org matches (60/30)
- Limited to top 10 results for performance
- Selects contact and opens contacts view with that contact selected
- Fixed: keyboard nav highlight color improved for better contrast
- Fixed: focus timing on arrow key navigation

### CS-3: Contact/Company Pages in Obsidian

**Depends on:** RD-4 (CRM structure design)

- [x] **CS-3.1** Implement contact page template
- [x] **CS-3.2** Implement company page template
- [x] **CS-3.3** Create function to generate/update contact page in vault
- [x] **CS-3.4** Create function to generate/update company page in vault
- [x] **CS-3.5** Auto-create contact page when contact is first linked in transcript
- [x] **CS-3.6** Auto-create company page when company is first referenced
- [x] **CS-3.7** Update contact page when new meetings are added
- [x] **CS-3.8** Update company page when new meetings are added
- [ ] **CS-3.9** Test contact page creation and updates
- [ ] **CS-3.10** Test company page creation and updates

**Files created/modified:**
- `src/main/templates/contactTemplate.js` - New contact page generator with YAML frontmatter
- `src/main/templates/companyTemplate.js` - New company page generator with YAML frontmatter
- `src/main/storage/VaultStructure.js` - Added createContactPage(), createCompanyPage(), contactPageExists(), companyPageExists()
- `src/main.js` - Added IPC handlers for contact/company page operations
- `src/preload.js` - Added preload APIs for contact/company page operations
- `src/renderer/contacts.js` - Added "Create Contact Page" button in detail view
- `src/index.css` - Added styles for contact obsidian actions

**Implementation:**
- Contact pages saved to `/People/{name}.md` with wiki-link aliases
- Company pages saved to `/Companies/{name}.md` with domain and industry
- Templates include YAML frontmatter with type, name, aliases, tags, created date
- Body includes contact info, notes section, and "Recent Meetings" with backlink hint
- UI button in contact detail to create page, shows checkmark when page exists
- Loading state with spinner animation while creating

**Auto-create implementation (CS-3.5/CS-3.6):**
- `autoCreateContactAndCompanyPages()` function in main.js
- Called automatically after `exportMeetingToObsidian()` saves files
- Creates contact pages for all participants with names
- Creates contact pages for speakers in speakerMapping
- Creates company pages for client/industry organizations from routing config
- Skips pages that already exist (doesn't overwrite)
- Non-critical operation - errors logged but don't fail export

**Meeting backlinks (CS-3.7/CS-3.8):**
- Transcript generation uses `[[Name]]` wiki-links for speaker names
- Participants section uses `[[Name]]` wiki-links
- Obsidian automatically shows backlinks on contact/company pages
- Only real names get wiki-links (not "Speaker A" or "SPK-xxx" labels)

### CS-4: Preview Routing in Templates Modal

**Location:** The "Select Summary Templates" popup modal that appears before processing.

- [x] **CS-4.1** Add "Preview Routing" section to templates modal
- [x] **CS-4.2** Implement routing preview logic showing:
  - Destination path in Obsidian
  - Which rule matched (or "no rule matched")
  - Why this rule was selected
- [x] **CS-4.3** If routing to "unfiled," show explanation of why no match
- [x] **CS-4.4** Add ability to manually select destination from preview
- [x] **CS-4.5** When manually selecting, offer to create/update routing rule
- [x] **CS-4.6** Implement routing rule suggestion/creation
- [x] **CS-4.7** Test with meeting that matches a rule
- [x] **CS-4.8** Test with meeting that would go to unfiled
- [ ] **CS-4.9** Test manual override and rule creation

**Files created/modified:**
- `src/main.js` - Added `routing:previewMeetingRoute` IPC handler with `buildRoutingReason()` helper
- `src/preload.js` - Added `routingPreviewMeetingRoute` API
- `src/index.html` - Added routing preview section in template modal
- `src/index.css` - Added routing preview styles (icons, badges, colors per route type)
- `src/renderer.js` - Added `loadRoutingPreview()` and `getRouteTypeIcon()` functions

**CS-4.4/4.5/4.6 Implementation (Manual Override & Rule Creation):**

Files modified:
- `src/main.js` - Added `routing:getAllDestinations` and `routing:addEmailsToOrganization` IPC handlers
- `src/main/validation/ipcSchemas.js` - Added `routingOverrideSchema` for validation
- `src/preload.js` - Added `routingGetAllDestinations` and `routingAddEmailsToOrganization` APIs
- `src/index.html` - Added destination picker dropdown and create rule prompt UI
- `src/index.css` - Added styles for change button, destination picker, override badge, and create rule prompt
- `src/renderer.js` - Added destination picker and rule creation logic

Features implemented:
- "Change" button in routing preview header opens destination picker dropdown
- Destinations grouped by type (Clients, Industry, Other) with all configured routes available
- Manual selection shows "Manual" badge and persists through summary generation
- Override passed to `exportMeetingToObsidian()` to use selected destination
- After applying override, "Create Rule" prompt appears for client/industry destinations
- Extracts unmatched email domains from meeting participants (excludes gmail, outlook, etc.)
- Domain chips with checkboxes allow selecting which domains to add to routing rule
- "Create Rule" button adds selected domains to the chosen organization's routing config
- Routing config automatically backed up and reloaded after rule creation

**Implementation:**
- Preview section shows automatically in template modal (between template list and cost estimate)
- Fetches routing decision from RoutingEngine based on meeting's participant emails
- Displays save path with color-coded icon (client=blue, industry=purple, internal=green, unfiled=yellow)
- Shows human-readable reason explaining the routing match (e.g., "Client match: john@acme.com matched 'ACME Corp'")
- Type badge shows category (client, industry, internal, unfiled)
- Supports multi-org routing (shows multiple destinations if applicable)

**Routing Logic Fix (completed during Phase 4 testing):**

Fixed internal routing logic in `RoutingEngine.js`:
- **Before:** Internal was counted as an "organization" and internal attendees could trigger internal routing even when external attendees present
- **After:** Internal routing ONLY happens when 100% of attendees are internal team members
- External attendees (clients, industry, unfiled) always take precedence
- Multi-org routing no longer includes internal as a destination
- `_determinePrimaryExternal()` excludes internal from primary determination

**Bug fixes during Phase 4 testing:**
- Fixed Google contact link format (was returning 404)
- Fixed meetings section not populating (combined upcomingMeetings + pastMeetings arrays from meetings.json)
- Fixed quick search keyboard navigation highlight color contrast
- Fixed meeting click navigation (was going to home instead of meeting detail)
- Fixed routing preview showing "undefined" for organization name (now passes orgName from config lookup)
- Fixed routing editor reading from wrong config file in dev mode

---

## Import System Enhancements

### IM-1: Audio File Import

**Current state:** App can import transcript files. Need to add audio file import.

- [x] **IM-1.1** Update import UI to accept audio files (.mp3, .wav, .m4a, etc.)
- [x] **IM-1.2** Add audio file type detection
- [x] **IM-1.3** When audio detected, show transcription provider selector
  - Default to currently selected provider
  - Allow user to change
- [x] **IM-1.4** Implement audio upload to transcription provider
- [x] **IM-1.5** Handle transcription result (same flow as recorded meetings)
- [x] **IM-1.6** Support batch audio import
- [x] **IM-1.7** Test import of single audio file
- [x] **IM-1.8** Test batch import of multiple audio files
- [x] **IM-1.9** Test provider switching at import time

**Files modified:**
- `src/main.js` - Added `import:transcribeAudio` and `import:importAudioFile` IPC handlers, updated `import:selectFiles` to include audio extensions, added `AUDIO_EXTENSIONS` and file type detection helpers
- `src/preload.js` - Added `importAudioFile` and `transcribeAudio` APIs
- `src/index.html` - Updated import modal to show audio transcription provider selector, updated file formats display
- `src/renderer.js` - Updated `handleFilePaths` to accept audio files, `updateImportUI` to show audio provider selector, `performBatchImport` to handle audio files separately with transcription

**Implementation:**
- File picker now accepts .mp3, .wav, .m4a, .ogg, .webm, .flac, .aac in addition to transcript files
- Audio files are automatically detected by extension and tagged with `type: 'audio'`
- When audio files are selected, a transcription provider dropdown appears (AssemblyAI or Deepgram)
- Batch import processes audio files first (transcribes via selected provider), then transcript files
- Progress indicator shows custom message during transcription ("Transcribing filename...")
- UUID-like filenames (e.g., `windows-desktop-xxx-xxx-xxx`) are auto-detected and replaced with friendly titles like "Imported Recording - Dec 5, 2024 2:30 PM"

### IM-2: Import Metadata Auto-Population

- [x] **IM-2.1** Define metadata fields for imported meetings:
  - Meeting title
  - Date/time
  - Participants
  - Meeting type
  - Duration (if determinable)
- [x] **IM-2.2** Implement filename pattern parsing for metadata extraction
  - Common patterns: `2024-01-15 Client Meeting.mp3`, `Meeting with John - Sales Call.txt`
- [x] **IM-2.3** Extract date from file modification time as fallback
- [x] **IM-2.4** Scan transcript content for mentioned names (potential participants)
- [x] **IM-2.5** Create meeting record with "needs verification" status
- [ ] **IM-2.6** Display auto-populated metadata in review queue (requires IM-3)
- [ ] **IM-2.7** Test various filename patterns
- [ ] **IM-2.8** Test fallback to file dates

**Files modified:**
- `src/main/import/MetadataExtractor.js` - Enhanced with:
  - `extractDateFromFileStats()` - File modification time fallback (IM-2.3)
  - Enhanced confidence tracking with `dateSource` and `titleSource`
  - Added `status: 'needs_verification'` to extracted metadata (IM-2.5)
- `src/main/import/ImportManager.js` - Added status field to meeting object

**Note:** Most metadata extraction was already implemented in Phase 8. v1.1 enhancements add file modification time fallback and status tracking for the review queue.

### IM-2.5: Import UX Improvements (v1.1 Session 2)

- [x] **IM-2.5.1** Change default checkbox states in import wizard:
  - "Generate auto-summary" - checked (default)
  - Template checkboxes - unchecked (was checked)
  - "Auto-export to Obsidian vault" - unchecked (was checked)
  - "Preview parsing before importing" - unchecked (unchanged)

**Files modified:**
- `src/index.html` - Removed `checked` from `autoExportCheck`
- `src/renderer.js` - Removed `checked` from template checkbox creation

### IM-3: Import Review Queue ❌ DESCOPED

**Status:** Descoped during v1.1 development

**Reason:** After implementation, it became clear that this feature added no functional value. The "approval" step didn't gate anything - imported meetings appeared in the main meeting list regardless of verification status. The review queue was extra friction without benefit.

**Decision:** Remove the feature entirely. If a review/approval workflow is needed in the future, it should gate actual functionality (e.g., prevent export to Obsidian until approved).

~~- [ ] **IM-3.1** Add "needs verification" status to meeting data model~~
~~- [ ] **IM-3.2** Create "Pending Imports" page/tab in Review section~~
~~- [ ] **IM-3.3** Display list of imported meetings awaiting verification~~
~~- [ ] **IM-3.4** For each meeting show metadata and approve/edit buttons~~
~~- [ ] **IM-3.5** Implement Edit functionality~~
~~- [ ] **IM-3.6** Implement single Approve functionality~~
~~- [ ] **IM-3.7** Implement multi-select with bulk Approve~~
~~- [ ] **IM-3.8** On approval: just save metadata, do NOT auto-process~~
~~- [ ] **IM-3.9** Test single approval flow~~
~~- [ ] **IM-3.10** Test bulk approval flow~~

---

## Vocabulary System

### VC-1: Vocabulary Storage & Management

**Depends on:** RD-2 (Vocabulary best practices research)

- [x] **VC-1.1** Design vocabulary data structure:
  - Global vocabulary list
  - Per-client vocabulary lists
  - Each entry: term, optional pronunciation hint, optional category
- [x] **VC-1.2** Determine storage location (app config directory for export/import)
- [x] **VC-1.3** Create vocabulary file format (YAML or JSON)
- [x] **VC-1.4** Implement vocabulary file read/write
- [x] **VC-1.5** Implement vocabulary merge function (global + client-specific)
- [x] **VC-1.6** Add vocabulary to settings export/import scope

**Files created:**
- `config/vocabulary.yaml` - YAML vocabulary storage with global and client sections
- `src/main/services/vocabularyService.js` - Vocabulary service with:
  - `getVocabularyForProvider(provider, clientSlug)` - Returns formatted vocabulary for AssemblyAI or Deepgram
  - `formatForAssemblyAI(vocab)` - Converts to `custom_spelling` array
  - `formatForDeepgram(vocab)` - Converts to `keyword:intensifier` strings
  - `getMergedVocabulary(clientSlug)` - Merges global + client-specific vocabulary
  - `exportVocabulary()` / `importVocabulary()` - For settings backup

### VC-2: Vocabulary UI

- [x] **VC-2.1** Design vocabulary management UI
  - Tab for global vocabulary
  - Tab for client-specific (select client)
  - Add/edit/delete terms
  - Import from file
  - Export to file
- [x] **VC-2.2** Add vocabulary section to settings panel
- [x] **VC-2.3** Implement global vocabulary editor
- [x] **VC-2.4** Implement client selector for client-specific vocabulary
- [x] **VC-2.5** Implement term add/edit/delete
- [x] **VC-2.6** Implement vocabulary file import
- [x] **VC-2.7** Implement vocabulary file export
- [ ] **VC-2.8** Test CRUD operations
- [ ] **VC-2.9** Test import/export

**Files created/modified:**
- `src/main.js` - Added vocabulary IPC handlers: `vocabulary:getConfig`, `vocabulary:getStats`, `vocabulary:getClientSlugs`, `vocabulary:addGlobalSpelling`, `vocabulary:addGlobalKeyword`, `vocabulary:addClientSpelling`, `vocabulary:addClientKeyword`, `vocabulary:removeGlobalSpelling`, `vocabulary:removeGlobalKeyword`, `vocabulary:saveConfig`, `vocabulary:reload`
- `src/preload.js` - Added vocabulary preload APIs
- `src/index.html` - Added vocabulary settings tab and panel with scope tabs, client selector, spelling/keyword forms, and import/export buttons
- `src/index.css` - Added vocabulary UI styles (scope tabs, client selector, vocabulary lists, item styling)
- `src/renderer/settings.js` - Added vocabulary management functions: `loadVocabulary()`, `loadClientSlugs()`, `renderVocabularyUI()`, `renderSpellingList()`, `renderKeywordList()`, `addSpelling()`, `addKeyword()`, `deleteSpelling()`, `deleteKeyword()`, `initializeVocabularyUI()`

**Implementation:**
- Full vocabulary UI in Settings > Vocabulary tab
- Global/Client-Specific scope switching with tabs
- Client selector populated from routing config + vocabulary-only clients
- Spelling corrections: comma-separated "from" variants → "to" target
- Keyword boosts: word + intensifier (1-10)
- Add/delete operations with toast notifications
- JSON export/import with merge support
- Reload from disk functionality

### VC-3: Vocabulary Integration with Transcription

- [x] **VC-3.1** Update transcription service to accept vocabulary list
- [x] **VC-3.2** Implement vocabulary formatting for AssemblyAI API
- [x] **VC-3.3** Implement vocabulary formatting for Deepgram API
- [x] ~~**VC-3.4** Implement vocabulary formatting for Recall.ai (if supported)~~ (Recall.ai SDK broken, not implementing)
- [x] **VC-3.5** Determine which client vocabulary to use based on meeting participants
- [x] **VC-3.6** Merge global + client vocabulary before sending to provider
- [ ] **VC-3.7** Test transcription with custom vocabulary (AssemblyAI)
- [ ] **VC-3.8** Test transcription with custom vocabulary (Deepgram)

**Files modified:**
- `src/main/services/transcriptionService.js`:
  - `transcribeWithAssemblyAI()` - Now accepts options with `custom_spelling` array
  - `requestAssemblyAITranscription()` - Adds `custom_spelling` to API request body
  - `transcribeWithDeepgram()` - Now accepts options with `keywords` array, adds to URL params
- `src/main.js`:
  - Recording completion handler (lines 2168-2198): Determines client from participants via routingEngine, gets vocabulary via vocabularyService.getVocabularyForProvider(), passes to transcribe()
  - `import:transcribeAudio` handler: Added vocabulary integration with optional clientSlug
  - `import:importAudioFile` handler: Added vocabulary integration with optional clientSlug

**Implementation:**
1. When recording ends, get participantEmails from meeting data
2. Use routingEngine.route() to match participants to organizations
3. Extract client slug if route type is 'client'
4. Call vocabularyService.getVocabularyForProvider(provider, clientSlug)
5. Service merges global + client-specific vocabulary automatically
6. Returns provider-specific format: `{custom_spelling: [...]}` for AssemblyAI, `{keywords: [...]}` for Deepgram
7. Pass vocabulary options to transcriptionService.transcribe()

---

## Settings Export/Import

### SE-1: Settings Export

- [x] **SE-1.1** Define export package contents:
  - Routing rules (routing.yaml)
  - Templates
  - Vocabulary lists (global and client-specific)
  - Speaker ID mappings
  - App preferences
  - API key references (not actual keys)
- [x] **SE-1.2** Implement export function that gathers all config files
- [x] **SE-1.3** Package into single archive (ZIP or similar)
- [x] **SE-1.4** Add "Export Settings" button to settings UI
- [x] **SE-1.5** Show file picker for export location
- [x] **SE-1.6** Generate export with timestamp in filename
- [x] **SE-1.7** Test export creates valid archive
- [x] **SE-1.8** Test all expected files are included

**Files created:**
- `src/main/services/settingsExportService.js` - Export/import service with:
  - `exportToZip(outputPath)` - Exports all settings to ZIP archive
  - `importFromZip(zipPath, options)` - Imports settings with merge support
  - `validateImportFile(zipPath)` - Validates import file structure
  - `getExportPreview()` - Preview what will be exported
  - `generateExportFilename()` - Creates timestamped filename
- `src/main.js` - Added IPC handlers: `settings:export`, `settings:import`, etc.
- `src/preload.js` - Added preload APIs for settings export/import
- `src/renderer/settings.js` - Added UI handlers for export/import buttons
- `src/index.html` - Added "Backup & Restore" section in Advanced settings
- `src/index.css` - Added secondary button styles
- Installed npm packages: `archiver`, `unzipper`

### SE-2: Settings Import

- [x] **SE-2.1** Add "Import Settings" button to settings UI
- [x] **SE-2.2** Show file picker for import archive
- [x] **SE-2.3** Validate archive structure before import
- [x] **SE-2.4** Show preview of what will be imported
- [x] **SE-2.5** Implement conflict resolution (overwrite vs. merge)
- [x] **SE-2.6** Extract and copy files to appropriate locations
- [x] **SE-2.7** Reload app configuration after import
- [x] **SE-2.8** Show success/failure summary
- [x] **SE-2.9** Test import of full settings package
- [x] **SE-2.10** Test partial import (some files missing)

**Implementation notes:**
- Import uses merge by default (existing files not overwritten unless `overwrite: true`)
- JSON files are deep-merged on import
- Status feedback shown in UI during export/import operations

**Config Path Consolidation (completed during Phase 4 bug fixes):**

All config files are now consolidated to `userData/config/` directory:
- Dev: `AppData/Roaming/jd-notes-things-dev/config/`
- Prod: `AppData/Roaming/jd-notes-things/config/`

Files stored in config/:
- `routing.yaml` - Routing rules
- `vocabulary.yaml` - Custom vocabulary
- `transcript-patterns.yaml` - Import patterns
- `app-settings.json` - App preferences (moved from userData root)
- `speaker-mappings.json` - Speaker ID mappings (moved from userData root)
- `templates/` - Summary templates

On first launch, app copies missing defaults from bundled config to userData (never overwrites existing). Migration code handles moving files from old locations.

**Files updated for config consolidation:**
- `src/main.js` - `initializeDefaultConfigFiles()`, `getRoutingConfigPath()`, SETTINGS_FILE_PATH
- `src/main/routing/ConfigLoader.js` - Now requires explicit configPath argument
- `src/main/services/settingsExportService.js` - Uses userData/config/ paths
- `src/main/services/speakerMappingService.js` - Path changed to config/speaker-mappings.json
- `src/main/services/vocabularyService.js` - Path changed to config/vocabulary.yaml
- `src/main/import/PatternConfigLoader.js` - Uses userData/config/

---

## UI Enhancements

### UI-1: Meeting Type Icons

**Depends on:** RD-1 (determine if Recall.ai SDK provides meeting type)

- [x] **UI-1.1** Research/confirm how to detect meeting type:
  - From Recall.ai SDK during recording
  - From meeting URL patterns (zoom.us, teams.microsoft.com) - using GoogleCalendar._detectPlatform()
  - Manual selection for imports
- [x] **UI-1.2** Add meeting type field to meeting data model (already exists as meeting.platform)
- [x] **UI-1.3** Create/source icons for:
  - Zoom
  - Microsoft Teams
  - Google Meet
  - Webex
  - Whereby
  - In-Person
  - Unknown/Other
- [x] **UI-1.4** Update meeting list UI to display icon (platformConfig in renderer.js)
- [x] **UI-1.5** Update meeting detail view to display icon (meetingDetailPlatform in index.html)
- [x] **UI-1.6** For imports, allow user to select meeting type (importPlatformSelect dropdown)
- [x] **UI-1.7** Test icon display for each meeting type

**Implementation notes:**
- Platform icons for Zoom, Teams, and Google Meet now use actual brand logo images (imported via webpack)
- Icons are rendered programmatically after HTML sanitization to avoid DOMPurify stripping
- Both meeting cards and calendar meeting cards display platform icons correctly
- In-person button correctly sets platform to 'in-person' even when Zoom/Teams is detected
- Calendar shows next 3 days (72 hours) with max 6 meetings

**Files likely involved:**
- Meeting list components
- Meeting data model
- Asset files for icons

---

## Review & Sync Management

### RS-1: "Not Synced to Obsidian" View ✅ Done

- [x] **RS-1.1** Add sync status field to meeting data model (using existing `obsidianLink` field)
- [x] **RS-1.2** Track when meeting is synced to Obsidian (already tracked via `obsidianLink`)
- [x] **RS-1.3** Create "Not Synced" filter/view (toggle button in header)
- [x] **RS-1.4** Display list of meetings not yet exported to Obsidian
- [x] **RS-1.5** Show key info: title, date, participants, sync status
- [x] **RS-1.6** Add "Sync to Obsidian" button for individual meetings (cloud upload icon)
- [x] **RS-1.7** Add bulk sync functionality ("Sync All" button appears when filter is active)
- [ ] **RS-1.8** Test view populates correctly
- [ ] **RS-1.9** Test sync from this view

**Implementation Notes:**
- Used existing `obsidianLink`/`vaultPath` fields for sync status tracking
- Added "Not Synced" toggle button in header-center area next to search
- Meeting cards show sync status in metadata and have individual sync buttons
- Bulk "Sync All" button appears in section header when filter is active
- Both individual and bulk sync show loading states and toast notifications

**Files modified:**
- `src/renderer.js` - Filter logic, toggle functions, sync buttons, bulk sync
- `src/index.html` - Not Synced filter toggle button
- `src/index.css` - Styles for filter button, sync buttons, btn-accent class

### RS-2: Stale Link Detection & Refresh

**Depends on:** RD-3 (Obsidian link management research)

- [ ] **RS-2.1** Add Obsidian path field to meeting data model (if not present)
- [ ] **RS-2.2** Add unique meeting ID to note frontmatter (if not present)
- [ ] **RS-2.3** Implement vault scan function to find notes by meeting ID
- [ ] **RS-2.4** Implement link validation (check if stored path still exists)
- [ ] **RS-2.5** Create "Refresh Links" function
  - Scan vault for all meeting notes
  - Match to app records by meeting ID
  - Update stored paths
- [ ] **RS-2.6** Add "Refresh Links" button to settings or review section
- [ ] **RS-2.7** Show results: updated, not found, unchanged
- [ ] **RS-2.8** For "not found" notes, offer file picker to manually locate
- [ ] **RS-2.9** Test with moved files
- [ ] **RS-2.10** Test with deleted files
- [ ] **RS-2.11** Test manual relocation

**Files likely involved:**
- `src/main/storage/VaultStructure.js`
- Meeting data model
- Settings or review UI

### RS-3: Review Section Organization

- [ ] **RS-3.1** Design Review section layout with tabs:
  - ~~Pending Imports (from IM-3)~~ - IM-3 descoped
  - Not Synced (from RS-1)
- [ ] **RS-3.2** Create Review section container component
- [ ] **RS-3.3** Implement tab navigation
- [ ] **RS-3.4** Add Review section to main navigation
- [ ] **RS-3.5** Add badge/counter showing total items needing attention
- [ ] **RS-3.6** Test navigation between tabs
- [ ] **RS-3.7** Test counter updates correctly

**Files likely involved:**
- New: `src/renderer/review.js`
- Navigation components

---

## Implementation Notes

### Dependencies Between Tasks

```
RD-1 (Recall.ai research) → SM-1 (Fix recorded speakers), UI-1 (Meeting icons)
RD-2 (Vocabulary research) → VC-1, VC-2, VC-3 (All vocabulary tasks)
RD-3 (Obsidian links research) → RS-2 (Stale link detection)
RD-4 (CRM structure design) → CS-3 (Contact/Company pages), SM-2 (Speaker replacement format)
RD-5 (Speaker matching algorithm) → SM-3 (Transcript repair)
```

### Suggested Implementation Order

1. **Phase 1: Research & Design**
   - Complete all RD-* tasks
   - Document findings for reference during implementation

2. **Phase 2: Bug Fixes**
   - BF-1 (Google auth)
   - BF-2 (Single instance)

3. **Phase 3: Core Infrastructure**
   - VC-1 (Vocabulary storage)
   - SE-1, SE-2 (Settings export/import)
   - IM-2 (Import metadata)

4. **Phase 4: Contact System**
   - CS-1 (Contacts page)
   - CS-2 (Quick search)
   - CS-3 (Obsidian contact/company pages)
   - CS-4 (Preview routing)

5. **Phase 5: Speaker Matching**
   - SM-1 (Fix recorded transcripts)
   - SM-2 (Global speaker replacement)
   - SM-3 (Transcript repair workflow)

6. **Phase 6: Import System**
   - IM-1 (Audio import)
   - ~~IM-3 (Review queue)~~ - Descoped

7. **Phase 7: UI & Polish**
   - UI-1 (Meeting type icons)
   - VC-2 (Vocabulary UI)
   - RS-1, RS-2, RS-3 (Review & sync management)

### File Locations Reference

| Component | Location |
|-----------|----------|
| Main process entry | `src/main/main.js` |
| Recording | `src/main/recording/RecordingManager.js` |
| Transcription | `src/main/services/transcriptionService.js` |
| Google Auth | `src/main/integrations/GoogleAuth.js` |
| Google Contacts | `src/main/integrations/GoogleContacts.js` |
| Speaker Matcher | `src/main/integrations/SpeakerMatcher.js` |
| Routing | `src/main/routing/RoutingEngine.js` |
| Vault Structure | `src/main/storage/VaultStructure.js` |
| Settings UI | `src/renderer/settings.js` |
| Templates UI | `src/renderer/templates.js` |

### Testing Checklist Template

For each feature, ensure:
- [ ] Unit tests written (where applicable)
- [ ] Manual testing completed
- [ ] Edge cases tested
- [ ] Error handling verified
- [ ] UI/UX reviewed

---

## Pre-Release Testing

Some features cannot be fully tested in development mode and require a packaged production build. Complete these tests before releasing v1.1.

### Build & Package

```bash
npm run make
```

Install the resulting package to test production behavior.

### PR-1: Production-Only Tests

These tests require the packaged app because they depend on behaviors that differ between dev and production:

- [ ] **PR-1.1** BF-1: Fresh install shows Google as "not connected"
  - Uninstall any existing version
  - Install fresh from new package
  - Verify Google button shows disconnected state
  - Connect to Google, verify it works

- [ ] **PR-1.2** BF-2: Single instance - window visible
  - Launch app (window visible)
  - Try to launch app again (shortcut, Start menu, or .exe)
  - Second launch should quit and first window should focus

- [ ] **PR-1.3** BF-2: Single instance - minimized to taskbar
  - Launch app
  - Minimize to taskbar
  - Try to launch app again
  - Window should restore from taskbar and focus

- [ ] **PR-1.4** BF-2: Single instance - minimized to tray
  - Launch app
  - Minimize to system tray (close button or minimize if tray enabled)
  - Try to launch app again
  - Window should appear from tray and focus

- [ ] **PR-1.5** SM-1: Speaker matching with real Zoom meeting
  - Join a Zoom meeting with 2+ participants
  - Record the meeting
  - After transcription, verify speakers are matched to participant names

- [ ] **PR-1.6** SM-1: Speaker matching with real Teams meeting
  - Join a Teams meeting with 2+ participants
  - Record the meeting
  - After transcription, verify speakers are matched to participant names

### PR-2: Upgrade Path Testing

- [ ] **PR-2.1** Upgrade from v1.0 to v1.1
  - Install v1.0 (if not already installed)
  - Use the app, create some meetings
  - Install v1.1 over v1.0
  - Verify existing data is preserved
  - Verify new features work

- [ ] **PR-2.2** Google re-authentication after upgrade
  - With v1.0, connect Google
  - Upgrade to v1.1
  - If BF-1 triggers token validation, verify user can re-connect smoothly

### PR-3: Release Checklist

- [ ] **PR-3.1** All dev-mode tests passing
- [ ] **PR-3.2** All production-only tests (PR-1) passing
- [ ] **PR-3.3** Upgrade path tests (PR-2) passing
- [ ] **PR-3.4** Update version number in package.json
- [ ] **PR-3.5** Update CHANGELOG.md
- [ ] **PR-3.6** Create git tag for release
- [ ] **PR-3.7** Build final release package
