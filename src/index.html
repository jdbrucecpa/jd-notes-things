<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Muesli - Debug Notes</title>
    <style>
      @keyframes slideIn {
        from {
          transform: translateX(400px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(400px);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-container">
      <header class="header" id="drag-region">
        <div class="header-left">
          <button class="btn back-btn" id="backButton" style="display: none;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z" fill="currentColor"/>
            </svg>
          </button>
        </div>
        <div class="header-center">
          <div class="search-container">
            <span class="search-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" fill="#666666"/>
              </svg>
            </span>
            <input type="text" class="search-input" placeholder="Search notes">
          </div>
        </div>
        <div class="header-right">
          <button class="btn new-note-btn" id="newNoteBtn">Record In-person Meeting</button>
          <button class="btn join-meeting-btn" id="joinMeetingBtn">Record Meeting</button>
          <button id="toggleSidebar" class="btn toggle-sidebar-btn" style="display: none;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 18H21V16H3V18ZM3 13H21V11H3V13ZM3 6V8H21V6H3Z" fill="#666666"/>
            </svg>
          </button>
          <div class="llm-provider-selector">
            <select class="llm-dropdown" id="llmProviderSelect" title="LLM Provider">
              <option value="azure">Azure OpenAI</option>
              <option value="anthropic">Anthropic</option>
              <option value="openai">OpenAI</option>
            </select>
          </div>
          <div class="transcription-provider-selector">
            <select class="transcription-dropdown" id="transcriptionProviderSelect" title="Transcription Provider">
              <option value="recallai">Recall.ai</option>
              <option value="assemblyai">AssemblyAI</option>
              <option value="deepgram">Deepgram</option>
            </select>
          </div>
          <button class="btn google-btn" id="googleBtn" title="Connect Google (Calendar + Contacts)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
              <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
              <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
              <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
            </svg>
            <span id="googleStatus" class="google-status"></span>
          </button>
          <button class="btn import-btn" id="importBtn" title="Import Transcripts">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" fill="currentColor"/>
            </svg>
          </button>
          <button class="btn settings-btn" id="settingsBtn" title="Settings">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22l-1.92 3.32c-.12.21-.07.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" fill="currentColor"/>
            </svg>
          </button>
          <div class="user-avatar">
            <svg width="32" height="32" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="40" height="40" rx="20" fill="#f0f0f0"/>
              <path d="M20 20C22.7614 20 25 17.7614 25 15C25 12.2386 22.7614 10 20 10C17.2386 10 15 12.2386 15 15C15 17.7614 17.2386 20 20 20Z" fill="#a0a0a0"/>
              <path d="M12 31C12 26.0294 15.5817 22 20 22C24.4183 22 28 26.0294 28 31" stroke="#a0a0a0" stroke-width="4"/>
            </svg>
          </div>
        </div>
      </header>

      <!-- Home Screen View -->
      <div id="homeView">
        <main class="main-content">
          <div class="content-container">
            <!-- Only showing notes section, calendar hidden -->
            <section class="meetings-section">
              <h2 class="section-title">Notes</h2>
              <div class="meetings-list" id="notes-list">
                <!-- Meeting cards will be inserted here by JavaScript -->
              </div>
            </section>
          </div>
        </main>
      </div>

      <!-- Note Editor View -->
      <div id="editorView" style="display: none;">
        <div class="note-container">
          <main class="editor-content">
            <div class="note-header">
              <div class="title-container">
                <h1 id="noteTitle" contenteditable="true">Paint shopping plan</h1>
                <div class="edit-icon">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" fill="#a0a0a0"/>
                  </svg>
                </div>
              </div>
              <div class="note-meta">
                <span class="note-date">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 4H18V2H16V4H8V2H6V4H5C3.89 4 3.01 4.9 3.01 6L3 20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4ZM19 20H5V10H19V20ZM19 8H5V6H19V8ZM9 14H7V12H9V14ZM13 14H11V12H13V14ZM17 14H15V12H17V14ZM9 18H7V16H9V18ZM13 18H11V16H13V18ZM17 18H15V16H17V18Z" fill="#6947BD"/>
                  </svg>
                  <span id="noteDate">Apr 24</span>
                </span>
                <span class="note-author">
                  <svg width="14" height="14" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="40" height="40" rx="20" fill="#f0f0f0"/>
                    <path d="M20 20C22.7614 20 25 17.7614 25 15C25 12.2386 22.7614 10 20 10C17.2386 10 15 12.2386 15 15C15 17.7614 17.2386 20 20 20Z" fill="#a0a0a0"/>
                    <path d="M12 31C12 26.0294 15.5817 22 20 22C24.4183 22 28 26.0294 28 31" stroke="#a0a0a0" stroke-width="4"/>
                  </svg>
                  Me
                </span>
              </div>
              <div class="obsidian-link-editor">
                <label for="obsidianLinkInput" class="obsidian-link-label">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="#6947BD"/>
                    <path d="M2 17L12 22L22 17M2 12L12 17L22 12" stroke="#6947BD" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Obsidian Vault Path:
                </label>
                <input
                  type="text"
                  id="obsidianLinkInput"
                  class="obsidian-link-input"
                  placeholder="e.g., clients/acme-corp/meetings/2025-01-15-kickoff.md"
                  title="Vault-relative path to the meeting file in Obsidian"
                />
              </div>
            </div>
            <textarea id="simple-editor"># Meeting Title
• New Note

# Meeting Date and Time
•

# Participants
•

# Description
•

Chat with meeting transcript: </textarea>

            <!-- AI Summaries Section -->
            <div id="summariesSection" class="summaries-section" style="display:none;">
              <div class="summaries-header">
                <h3>AI Generated Summaries</h3>
                <button class="summaries-collapse-btn" id="collapseSummaries" title="Collapse summaries">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 10L12 15L17 10H7Z" fill="currentColor"/>
                  </svg>
                </button>
              </div>
              <div id="summariesContent" class="summaries-content">
                <!-- Summaries will be dynamically inserted here -->
              </div>
            </div>
          </main>

          <aside class="sidebar" id="sidebar" style="display:none;">
            <div class="sidebar-content">
              <section class="sidebar-section">
                <h3>SHARE NOTES</h3>
                <div class="share-options">
                  <button class="share-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z" fill="#666666"/>
                    </svg>
                    Copy link
                  </button>
                  <button class="share-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM7 10H9V17H7V10ZM11 7H13V17H11V7ZM15 13H17V17H15V13Z" fill="#666666"/>
                    </svg>
                    Copy text
                  </button>
                </div>

                <div class="share-export">
                  <button class="share-btn wide">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 18H4V8L12 13L20 8V18ZM12 11L4 6H20L12 11Z" fill="#666666"/>
                    </svg>
                    Email
                  </button>
                  <button class="share-btn wide">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M22 6C22 4.9 21.1 4 20 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6ZM20 6L12 11L4 6H20ZM20 18H4V8L12 13L20 8V18Z" fill="#4285F4"/>
                    </svg>
                    Slack
                  </button>
                </div>
              </section>

              <section class="sidebar-section">
                <h3>ASK MUESLI</h3>
                <div class="ai-options">
                  <button class="ai-btn">Generate meeting summary</button>
                  <button class="ai-btn">List action items</button>
                  <button class="ai-btn">Write follow-up email</button>
                  <button class="ai-btn">List Q&A</button>
                </div>
              </section>
            </div>
          </aside>
        </div>

        <div class="floating-controls">
          <div class="upload-progress" id="uploadProgress" style="display: none;">
            <div class="upload-progress-bar">
              <div class="upload-progress-fill" id="uploadProgressFill"></div>
            </div>
            <div class="upload-progress-text" id="uploadProgressText">Uploading 0%</div>
          </div>
          <div class="control-buttons">
            <button class="control-btn record-btn" id="recordButton">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="record-icon">
                <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z" fill="currentColor"/>
                <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" fill="currentColor"/>
              </svg>
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="stop-icon" style="display: none;">
                <path d="M6 6h12v12H6V6z" fill="currentColor"/>
              </svg>
            </button>
            <button class="control-btn generate-btn" id="generateButton">
              <svg width="16" height="16" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 4px;">
                <path d="M208,512a24.84,24.84,0,0,1-23.34-16l-39.84-103.6a16.06,16.06,0,0,0-9.19-9.19L32,343.34a25,25,0,0,1,0-46.68l103.6-39.84a16.06,16.06,0,0,0,9.19-9.19L184.66,144a25,25,0,0,1,46.68,0l39.84,103.6a16.06,16.06,0,0,0,9.19,9.19l103,39.63A25.49,25.49,0,0,1,400,320.52a24.82,24.82,0,0,1-16,22.82l-103.6,39.84a16.06,16.06,0,0,0-9.19,9.19L231.34,496A24.84,24.84,0,0,1,208,512Z" fill="currentColor"/>
                <path d="M88,176a14.67,14.67,0,0,1-13.69-9.4L57.45,122.76a7.28,7.28,0,0,0-4.21-4.21L9.4,101.69a14.67,14.67,0,0,1,0-27.38L53.24,57.45a7.31,7.31,0,0,0,4.21-4.21L74.16,9.79A15,15,0,0,1,86.23.11,14.67,14.67,0,0,1,101.69,9.4l16.86,43.84a7.31,7.31,0,0,0,4.21,4.21L166.6,74.31a14.67,14.67,0,0,1,0,27.38l-43.84,16.86a7.28,7.28,0,0,0-4.21,4.21L101.69,166.6A14.67,14.67,0,0,1,88,176Z" fill="currentColor"/>
                <path d="M400,256a16,16,0,0,1-14.93-10.26l-22.84-59.37a8,8,0,0,0-4.6-4.6l-59.37-22.84a16,16,0,0,1,0-29.86l59.37-22.84a8,8,0,0,0,4.6-4.6L384.9,42.68a16.45,16.45,0,0,1,13.17-10.57,16,16,0,0,1,16.86,10.15l22.84,59.37a8,8,0,0,0,4.6,4.6l59.37,22.84a16,16,0,0,1,0,29.86l-59.37,22.84a8,8,0,0,0-4.6,4.6l-22.84,59.37A16,16,0,0,1,400,256Z" fill="currentColor"/>
              </svg>
              Generate
            </button>
            <button class="control-btn obsidian-btn" id="obsidianButton" style="display: none;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 4px;">
                <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="currentColor"/>
                <path d="M2 17L12 22L22 17M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span id="obsidianButtonText">Publish to Obsidian</span>
            </button>
          </div>
        </div>

        <div class="chat-input-container">
          <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Ask about the meeting..." style="display: none;" />
            <button id="sendButton" style="display: none;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M2.01 21L23 12L2.01 3L2 10L17 12L2 14L2.01 21Z" fill="#0077FF"/>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Debug Panel -->
    <div class="debug-panel hidden" id="debugPanel">
      <div class="debug-panel-header" id="debug-drag-region">
        <h3>Debugging Tools</h3>
        <button class="debug-panel-close" id="closeDebugPanelBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/>
          </svg>
        </button>
      </div>

      <div class="debug-panel-content">
        <!-- SDK Logger Section -->
        <div class="debug-section" id="loggerSection">
          <div class="debug-section-header">
            <h4>RecallAI SDK Logger</h4>
            <button class="debug-section-action" id="clearLoggerBtn">Clear</button>
          </div>
          <div class="debug-section-content" id="sdkLoggerContent">
            <!-- Log entries will be added here dynamically -->
          </div>
        </div>

        <!-- Transcript Section -->
        <div class="debug-section" id="transcriptSection">
          <div class="debug-section-header">
            <h4>Transcript</h4>
          </div>
          <div class="debug-section-content" id="transcriptContent">
            <div class="placeholder-content">
              <p>Live transcript will appear here during recording</p>
            </div>
          </div>
        </div>

        <!-- Participants Section -->
        <div class="debug-section" id="participantsSection">
          <div class="debug-section-header">
            <h4>Meeting Participants</h4>
          </div>
          <div class="debug-section-content" id="participantsContent">
            <div class="placeholder-content">
              <p>Detected participants will appear here</p>
            </div>
          </div>
        </div>

        <!-- Participant Video Debug Section -->
        <div class="debug-section" id="videoSection">
          <div class="debug-section-header">
            <h4>Participant Video</h4>
          </div>
          <div class="debug-section-content" id="videoContent">
            <div class="placeholder-content video-placeholder">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z" fill="#999"/>
              </svg>
              <p>Participant video will appear here</p>
            </div>
          </div>
        </div>

        <!-- Screenshare Video Debug Section -->
        <div class="debug-section" id="screenshareSection">
          <div class="debug-section-header">
            <h4>Screenshare</h4>
          </div>
          <div class="debug-section-content" id="screenshareContent">
            <div class="placeholder-content video-placeholder">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z" fill="#999"/>
              </svg>
              <p>Screenshare will appear here</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <button class="debug-panel-toggle panel-hidden" id="debugPanelToggle">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z" fill="currentColor"/>
      </svg>
    </button>

    <!-- Template Selection Modal -->
    <div class="modal-overlay" id="templateModal" style="display: none;">
      <div class="modal-content template-modal">
        <div class="modal-header">
          <h2>Select Summary Templates</h2>
          <button class="modal-close" id="closeTemplateModal">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/>
            </svg>
          </button>
        </div>

        <div class="modal-body">
          <p class="template-description">Choose one or more templates to generate summaries:</p>

          <div class="template-list" id="templateList">
            <!-- Templates will be loaded here dynamically -->
          </div>

          <div class="cost-estimate" id="costEstimate" style="display: none;">
            <div class="cost-header">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z" fill="currentColor"/>
              </svg>
              <span>Estimated Cost</span>
            </div>
            <div class="cost-details">
              <div class="cost-item">
                <span>Tokens:</span>
                <span id="totalTokens">-</span>
              </div>
              <div class="cost-item">
                <span>Cost:</span>
                <span id="totalCost" class="cost-amount">$0.00</span>
              </div>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button class="btn btn-secondary" id="cancelGenerate">Cancel</button>
          <button class="btn btn-primary" id="confirmGenerate" disabled>Generate Summaries</button>
        </div>
      </div>
    </div>

    <!-- Import Transcripts Modal -->
    <div class="modal-overlay" id="importModal" style="display: none;">
      <div class="modal-content import-modal">
        <div class="modal-header">
          <h2>Import Transcripts</h2>
          <button class="modal-close" id="closeImportModal">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/>
            </svg>
          </button>
        </div>

        <div class="modal-body">
          <p class="import-description">Import existing meeting transcripts from .txt, .md, .vtt, or .srt files.</p>

          <!-- File Selection Area -->
          <div class="file-drop-zone" id="fileDropZone">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" fill="#999"/>
            </svg>
            <h3>Drop files here or</h3>
            <div style="display: flex; gap: 12px; justify-content: center; margin-top: 12px;">
              <button class="btn btn-secondary" id="browseFilesBtn">Browse Files</button>
              <button class="btn btn-secondary" id="browseFolderBtn">Browse Folder</button>
            </div>
            <p style="margin-top: 12px;">Supported formats: .txt, .md, .vtt, .srt</p>
            <input type="file" id="fileInput" multiple accept=".txt,.md,.vtt,.srt" style="display: none;" />
            <input type="file" id="folderInput" webkitdirectory directory style="display: none;" />
          </div>

          <!-- Selected Files List -->
          <div class="selected-files" id="selectedFilesList" style="display: none;">
            <div class="selected-files-header">
              <h3>Selected Files (<span id="fileCount">0</span>)</h3>
              <button class="btn btn-secondary btn-sm" id="clearFilesBtn">Clear All</button>
            </div>
            <div class="files-list" id="filesListContainer">
              <!-- File items will be added here dynamically -->
            </div>
          </div>

          <!-- Import Options -->
          <div class="import-options" id="importOptions" style="display: none;">
            <h3>Import Options</h3>

            <div class="import-option-group">
              <h4 style="margin: 0 0 8px 0; font-size: 14px; color: #666;">Summaries</h4>
              <label class="checkbox-label">
                <input type="checkbox" id="generateAutoSummaryCheck" checked />
                <span>Generate auto-summary</span>
              </label>
              <div id="templateCheckboxes" style="margin-left: 20px;">
                <!-- Template checkboxes will be dynamically added here -->
              </div>
            </div>

            <div class="import-option-group" style="margin-top: 16px;">
              <h4 style="margin: 0 0 8px 0; font-size: 14px; color: #666;">Export</h4>
              <label class="checkbox-label">
                <input type="checkbox" id="autoExportCheck" checked />
                <span>Auto-export to Obsidian vault</span>
              </label>
            </div>
          </div>

          <!-- Progress Indicator -->
          <div class="import-progress" id="importProgress" style="display: none;">
            <div class="progress-header">
              <span>Importing...</span>
              <span id="progressText">0 / 0</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="importProgressFill"></div>
            </div>
            <div id="currentFileStatus"></div>
          </div>
        </div>

        <div class="modal-footer">
          <div style="flex: 1; font-size: 12px; color: #666; text-align: left;">
            Import runs in background - you can close this window after starting
          </div>
          <button class="btn btn-secondary" id="cancelImport">Cancel</button>
          <button class="btn btn-primary" id="startImport" disabled>Import Files</button>
        </div>
      </div>
    </div>

    <!-- Settings Modal (Phase 10.1) -->
    <div class="modal-overlay" id="settingsModal" style="display: none;">
      <div class="modal-content settings-modal">
        <div class="modal-header">
          <h2>Settings</h2>
          <button class="modal-close" id="closeSettingsModal">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="currentColor"/>
            </svg>
          </button>
        </div>

        <div class="settings-content">
          <!-- Settings Sidebar -->
          <div class="settings-sidebar">
            <div class="settings-tab active" data-tab="general">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="currentColor"/>
              </svg>
              <span>General</span>
            </div>
            <div class="settings-tab" data-tab="appearance">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z" fill="currentColor"/>
              </svg>
              <span>Appearance</span>
            </div>
            <div class="settings-tab" data-tab="security">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z" fill="currentColor"/>
              </svg>
              <span>Security</span>
            </div>
            <div class="settings-tab" data-tab="advanced">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z" fill="currentColor"/>
              </svg>
              <span>Advanced</span>
            </div>
            <div class="settings-tab" data-tab="about">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" fill="currentColor"/>
              </svg>
              <span>About</span>
            </div>
          </div>

          <!-- Settings Panels -->
          <div class="settings-panel" id="generalPanel">
            <div class="settings-section">
              <h3 class="settings-section-title">Application</h3>

              <div class="settings-item">
                <div class="settings-item-info">
                  <div class="settings-item-label">Vault Path</div>
                  <div class="settings-item-description">Location of your Obsidian vault</div>
                </div>
                <div class="settings-item-control">
                  <input type="text" class="settings-input" id="vaultPathInput" placeholder="C:\Users\...\vault" readonly />
                </div>
              </div>

              <div class="settings-item">
                <div class="settings-item-info">
                  <div class="settings-item-label">Auto-start Recording</div>
                  <div class="settings-item-description">Automatically start recording when calendar meetings begin</div>
                </div>
                <div class="settings-item-control">
                  <div class="toggle-switch" id="autoStartToggle">
                    <div class="toggle-switch-thumb"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="settings-panel" id="appearancePanel" style="display: none;">
            <div class="settings-section">
              <h3 class="settings-section-title">Theme</h3>

              <div class="settings-item">
                <div class="settings-item-info">
                  <div class="settings-item-label">Dark Mode</div>
                  <div class="settings-item-description">Use dark theme for the application interface</div>
                </div>
                <div class="settings-item-control">
                  <div class="toggle-switch" id="darkModeToggle">
                    <div class="toggle-switch-thumb"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="settings-panel" id="securityPanel" style="display: none;">
            <!-- API Key Management Section -->
            <div class="settings-section">
              <h3 class="settings-section-title">API Key Management</h3>
              <div class="settings-item-description" style="margin-bottom: 16px;">
                Securely store API keys in Windows Credential Manager. Keys are encrypted and protected by your Windows account.
              </div>

              <!-- Migration Notice -->
              <div class="migration-notice" id="migrationNotice" style="display: none;">
                <div class="migration-notice-icon">⚠️</div>
                <div class="migration-notice-content">
                  <strong>Migration Required</strong>
                  <p>We detected API keys in your .env file. Click "Migrate Keys" to move them to secure storage.</p>
                  <button class="btn-primary" id="migrateKeysBtn">Migrate Keys from .env</button>
                </div>
              </div>

              <!-- API Keys Table -->
              <div class="api-keys-container">
                <table class="api-keys-table">
                  <thead>
                    <tr>
                      <th>Service</th>
                      <th>Key</th>
                      <th>Status</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="apiKeysTableBody">
                    <tr>
                      <td colspan="4" style="text-align: center; padding: 32px;">
                        <div class="spinner"></div>
                        <p style="margin-top: 12px; color: var(--text-secondary);">Loading keys...</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

          </div>

          <div class="settings-panel" id="advancedPanel" style="display: none;">
            <div class="settings-section">
              <h3 class="settings-section-title">Data Management</h3>

              <div class="settings-action-group">
                <button class="settings-action-btn" id="exportSettingsBtn">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" fill="currentColor" transform="rotate(180 12 12)"/>
                  </svg>
                  <span>Export Settings</span>
                </button>
                <button class="settings-action-btn" id="importSettingsBtn">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" fill="currentColor"/>
                  </svg>
                  <span>Import Settings</span>
                </button>
              </div>
              <input type="file" id="importSettingsFile" accept=".json" style="display: none;" />
            </div>

            <div class="settings-section">
              <h3 class="settings-section-title">Developer</h3>

              <div class="settings-item">
                <div class="settings-item-info">
                  <div class="settings-item-label">Debug Mode</div>
                  <div class="settings-item-description">Show additional debugging information</div>
                </div>
                <div class="settings-item-control">
                  <div class="toggle-switch" id="debugModeToggle">
                    <div class="toggle-switch-thumb"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="settings-panel" id="aboutPanel" style="display: none;">
            <div class="settings-section">
              <div class="about-info">
                <h3>JD Notes Things</h3>
                <p class="version">v0.1.0</p>
                <p>AI-Powered Meeting Transcription & Summarization</p>
                <p style="margin-top: 16px; color: var(--text-secondary);">© 2025 Nick Faro</p>
              </div>
            </div>

            <div class="settings-section">
              <h3 class="settings-section-title">System Information</h3>
              <div class="settings-item">
                <div class="settings-item-info">
                  <div class="settings-item-label">Electron Version</div>
                </div>
                <div class="settings-item-control">
                  <span style="font-family: monospace; color: var(--text-secondary);" id="electronVersion">-</span>
                </div>
              </div>
              <div class="settings-item">
                <div class="settings-item-info">
                  <div class="settings-item-label">Node Version</div>
                </div>
                <div class="settings-item-control">
                  <span style="font-family: monospace; color: var(--text-secondary);" id="nodeVersion">-</span>
                </div>
              </div>
              <div class="settings-item">
                <div class="settings-item-info">
                  <div class="settings-item-label">Chrome Version</div>
                </div>
                <div class="settings-item-control">
                  <span style="font-family: monospace; color: var(--text-secondary);" id="chromeVersion">-</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
